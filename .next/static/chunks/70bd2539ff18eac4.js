(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";let t,s,a,n;var r,i,o,l,c,d,u,p,h,m,f,g,y,b,x,v,w,N,E,A,C,S,j,R,O,T,I,k,_=e.i(43476),P=e.i(71645);let M=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),L=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let D=(0,P.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:r,iconNode:i,...o},l)=>(0,P.createElement)("svg",{ref:l,...U,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:M("lucide",n),...!r&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>(0,P.createElement)(e,t)),...Array.isArray(r)?r:[r]])),F=(e,t)=>{let s=(0,P.forwardRef)(({className:s,...a},n)=>(0,P.createElement)(D,{ref:n,iconNode:t,className:M(`lucide-${L(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...a}));return s.displayName=L(e),s},B=F("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),G=F("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),$=F("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),H=F("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),q=F("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Y=F("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),V=F("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),K=F("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),z=F("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),W=F("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),J=F("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),X=F("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Q=F("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Z=F("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),ee=[{id:"metadata",label:"Business Metadata",icon:B},{id:"services",label:"Services",icon:G},{id:"locations",label:"Locations",icon:$},{id:"resources",label:"Resources",icon:H},{id:"data",label:"User Data Fields",icon:q},{id:"integrations",label:"System Integrations",icon:Y},{id:"conversation",label:"Behavior Rules",icon:V},{id:"safety",label:"Safety & Boundaries",icon:K},{id:"mode",label:"Operation Modes",icon:z},{id:"vapi",label:"VAPI Setup",icon:z}],et=({activeSection:e,onNavigate:t,onLock:s,onLaunchClient:a,isValid:n,isSaving:r,isLocked:i,isLaunching:o,agents:l,onSelectAgent:c,branding:d,currentAgentId:u})=>(0,_.jsxs)("aside",{className:"w-64 bg-slate-900 text-slate-300 flex flex-col h-screen fixed left-0 top-0 overflow-y-auto border-r border-slate-800",children:[(0,_.jsxs)("div",{className:"p-6 border-b border-slate-800",children:[(0,_.jsxs)("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d?.logoUrl?(0,_.jsx)("img",{src:d.logoUrl,alt:"Logo",className:"w-8 h-8 object-contain"}):(0,_.jsx)("div",{className:"w-8 h-8 bg-brand-600 rounded-lg flex items-center justify-center",children:(0,_.jsx)(z,{className:"w-5 h-5 text-white"})}),d?.appName||"Voice Admin"]}),(0,_.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Configurator v1.0"})]}),l.length>0&&(0,_.jsxs)("div",{className:"px-6 py-4 border-b border-slate-800 bg-slate-900/50",children:[(0,_.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-2 block",children:"Organization Agents"}),(0,_.jsx)("div",{className:"space-y-1",children:l.map(e=>(0,_.jsxs)("button",{onClick:()=>c(e.id),className:`w-full text-left px-2 py-1.5 rounded text-xs transition-colors flex items-center gap-2 ${e.id===u?"bg-slate-800 text-white font-medium border border-slate-700":"text-slate-400 hover:text-slate-200 hover:bg-slate-800/50"}`,children:[(0,_.jsx)(Z,{className:"w-3 h-3 text-brand-500"}),(0,_.jsx)("span",{className:"truncate",children:e.metadata?.businessName||e.id})]},e.id))})]}),(0,_.jsx)("nav",{className:"flex-1 py-4",children:(0,_.jsx)("ul",{className:"space-y-1",children:ee.map(s=>{let a=s.icon,n=e===s.id;return(0,_.jsx)("li",{children:(0,_.jsxs)("button",{onClick:()=>t(s.id),className:`w-full flex items-center gap-3 px-6 py-3 text-sm font-medium transition-colors ${n?"bg-brand-900/30 text-brand-500 border-r-2 border-brand-500":"hover:bg-slate-800 hover:text-white"}`,children:[(0,_.jsx)(a,{className:`w-4 h-4 ${n?"text-brand-500":"text-slate-500"}`}),s.label]})},s.id)})})}),(0,_.jsxs)("div",{className:"p-6 border-t border-slate-800 space-y-3",children:[(0,_.jsxs)("button",{onClick:a,disabled:o,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold bg-slate-800 text-indigo-400 hover:bg-slate-700 hover:text-indigo-300 border border-slate-700 transition-all disabled:opacity-70 disabled:cursor-wait",title:"Open Live Agent Interface",children:[o?(0,_.jsx)(X,{className:"w-4 h-4 animate-spin"}):(0,_.jsx)(Q,{className:"w-4 h-4"}),o?"Launching...":"Launch Web Client"]}),(0,_.jsxs)("button",{onClick:s,disabled:!n||r||i,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-bold transition-all ${n&&!i?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-900/20":"bg-slate-800 text-slate-500 cursor-not-allowed"} ${r?"opacity-80 cursor-wait":""}`,children:[r?(0,_.jsx)(X,{className:"w-4 h-4 animate-spin"}):n&&!i?(0,_.jsx)(W,{className:"w-4 h-4"}):(0,_.jsx)(J,{className:"w-4 h-4"}),r?"Saving...":n&&!i?"Validate & Lock":i?"Locked":"Incomplete"]})]})]}),es=F("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ea=F("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),en=F("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),er=F("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ei=F("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),eo=F("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),el=({onLogin:e,onDemoLogin:t,isLoggingIn:s})=>{let[a,n]=(0,P.useState)(null),r=async()=>{n(null);try{await e()}catch(e){n(e.message||"Failed to sign in")}},i=a&&(a.includes("CONFIGURATION_ERROR")||a.includes("api-key-not-valid")),o=a&&(a.includes("DOMAIN_NOT_ALLOWED")||a.includes("unauthorized-domain")),l=a&&(a.includes("AUTH_ERROR")||a.includes("operation-not-allowed")),c=a&&a.includes("Login cancelled"),d=a&&(a.includes("API_KEY_ERROR")||a.includes("api-key-not-valid")),u="https://ai-voice-agent-c2a2b.firebaseapp.com/__/auth/handler";return(0,_.jsxs)("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[(0,_.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 opacity-20 pointer-events-none",children:[(0,_.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-600 rounded-full blur-[128px]"}),(0,_.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600 rounded-full blur-[128px]"})]}),(0,_.jsxs)("div",{className:`w-full ${i||o||l||c||d?"max-w-2xl":"max-w-md"} bg-slate-800/80 backdrop-blur-xl border border-slate-700 rounded-2xl shadow-2xl p-8 z-10 transition-all duration-300`,children:[(0,_.jsx)("div",{className:"flex justify-center mb-8",children:(0,_.jsx)("div",{className:"w-16 h-16 bg-brand-600 rounded-xl flex items-center justify-center shadow-lg shadow-brand-900/50",children:(0,_.jsx)(z,{className:"w-8 h-8 text-white"})})}),(0,_.jsxs)("div",{className:"text-center mb-8",children:[(0,_.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Voice AI Admin"}),(0,_.jsx)("p",{className:"text-slate-400",children:"Sign in to configure your AI Agents"})]}),a&&(0,_.jsxs)("div",{className:"mb-6 rounded-lg overflow-hidden border border-red-800 bg-red-900/20",children:[(0,_.jsxs)("div",{className:"p-4 flex items-start gap-3 bg-red-900/30",children:[(0,_.jsx)(en,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,_.jsx)("p",{className:"text-sm text-red-200 font-medium break-words",children:i?"Configuration Required":o?"Domain Not Authorized":l?"Provider Not Enabled":d?"API Key Rejected":c?"Login Cancelled / Blocked":a})]}),c&&(0,_.jsxs)("div",{className:"p-4 bg-slate-950/50 text-left border-t border-red-800/50 space-y-4",children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("p",{className:"text-sm text-white font-semibold flex items-center gap-2",children:[(0,_.jsx)(eo,{className:"w-4 h-4 text-brand-400"}),'Fixing "redirect_uri_mismatch"']}),(0,_.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:'If you saw "Error updating Google" in Firebase Console, follow these steps instead of trying to fix Firebase.'})]}),(0,_.jsxs)("ol",{className:"text-xs text-slate-300 space-y-3 list-decimal pl-4",children:[(0,_.jsxs)("li",{children:["Go to ",(0,_.jsx)("a",{href:"https://console.cloud.google.com/apis/credentials?project=ai-voice-agent-c2a2b",target:"_blank",className:"text-brand-400 hover:underline",children:"Google Cloud Console > Credentials"}),"."]}),(0,_.jsxs)("li",{children:["Find the client named ",(0,_.jsx)("strong",{children:'"Web client (auto created by Google Service)"'}),".",(0,_.jsx)("div",{className:"text-slate-500 italic mt-0.5",children:"Do NOT use the one you created manually."})]}),(0,_.jsxs)("li",{children:['Edit it and add this EXACT URI to "Authorized redirect URIs":',(0,_.jsxs)("div",{className:"mt-2 flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700",children:[(0,_.jsx)("code",{className:"text-emerald-400 font-mono break-all",children:u}),(0,_.jsx)("button",{onClick:()=>navigator.clipboard.writeText(u),className:"text-slate-500 hover:text-white p-1",children:(0,_.jsx)(er,{className:"w-4 h-4"})})]})]}),(0,_.jsx)("li",{children:"Click Save and try logging in again."})]})]}),d&&(0,_.jsxs)("div",{className:"p-4 bg-slate-950/50 text-left border-t border-red-800/50 space-y-4",children:[(0,_.jsx)("p",{className:"text-sm text-slate-300",children:"Your API Key is being rejected. This usually means one of the following:"}),(0,_.jsxs)("div",{className:"text-xs text-slate-400 space-y-3",children:[(0,_.jsxs)("div",{className:"p-3 bg-blue-900/10 border border-blue-800/30 rounded",children:[(0,_.jsx)("p",{className:"text-blue-300 font-bold mb-1 uppercase tracking-tighter",children:"1. Project Mismatch (Most Common)"}),(0,_.jsxs)("p",{children:["Your ",(0,_.jsx)("code",{children:".env"})," project ID is ",(0,_.jsx)("strong",{children:"ai-voice-agent-c2a2b"}),", but you might be using an API key from a different project (like 'tyjblogs'). Ensure you are viewing the correct project in Google Cloud Console."]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("p",{className:"text-slate-200 font-semibold",children:"2. Identity Toolkit API is Disabled"}),(0,_.jsxs)("p",{children:["Go to ",(0,_.jsx)("a",{href:"https://console.cloud.google.com/apis/library/identitytoolkit.googleapis.com?project=ai-voice-agent-c2a2b",target:"_blank",className:"text-brand-400 hover:underline",children:"Google Cloud Console"})," and click ",(0,_.jsx)("strong",{children:'"Enable"'})," for the Identity Toolkit API."]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("p",{className:"text-slate-200 font-semibold",children:"3. Authorized Domains"}),(0,_.jsxs)("p",{children:["Ensure ",(0,_.jsx)("code",{children:"admin-voice-agent-lac.vercel.app"})," is added to ",(0,_.jsx)("strong",{children:"Authorized Domains"})," in your Firebase Console > Authentication > Settings."]})]})]})]}),l&&(0,_.jsxs)("div",{className:"p-4 bg-slate-950/50 text-left border-t border-red-800/50",children:[(0,_.jsx)("p",{className:"text-sm text-slate-300 mb-3",children:"Google Sign-In is currently disabled in your Firebase project settings."}),(0,_.jsxs)("div",{className:"text-xs text-slate-400 space-y-2 mb-4",children:[(0,_.jsxs)("p",{children:["1. Go to ",(0,_.jsxs)("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noreferrer",className:"text-brand-400 hover:underline inline-flex items-center gap-1",children:["Firebase Console ",(0,_.jsx)(Q,{className:"w-3 h-3"})]})]}),(0,_.jsxs)("p",{children:["2. Select your project: ",(0,_.jsx)("strong",{children:"ai-voice-agent-c2a2b"})]}),(0,_.jsxs)("p",{children:["3. Navigate to ",(0,_.jsx)("strong",{children:"Authentication"})," > ",(0,_.jsx)("strong",{children:"Sign-in method"})]}),(0,_.jsxs)("p",{children:["4. Click ",(0,_.jsx)("strong",{children:"Add new provider"})," (or edit Google if listed)"]}),(0,_.jsxs)("p",{children:["5. Select ",(0,_.jsx)("strong",{children:"Google"}),", toggle ",(0,_.jsx)("strong",{children:"Enable"}),", and click ",(0,_.jsx)("strong",{children:"Save"})]})]})]})]}),(0,_.jsx)("div",{className:"space-y-4 mb-8",children:(0,_.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-700/50 rounded-lg border border-slate-600",children:[(0,_.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg text-blue-400",children:(0,_.jsx)(G,{className:"w-5 h-5"})}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h3",{className:"text-sm font-semibold text-slate-200",children:"Calendar Integration"}),(0,_.jsx)("p",{className:"text-xs text-slate-500",children:"Access to manage bookings"})]})]})}),(0,_.jsxs)("div",{className:"space-y-3",children:[(0,_.jsxs)("button",{onClick:r,disabled:s,className:"w-full bg-white text-slate-900 font-bold py-3 px-4 rounded-xl hover:bg-slate-100 transition-all flex items-center justify-center gap-2 group disabled:opacity-70 disabled:cursor-not-allowed",children:[s?(0,_.jsx)(X,{className:"w-5 h-5 animate-spin"}):(0,_.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),(0,_.jsx)("span",{children:s?"Connecting...":"Sign in with Google"}),!s&&(0,_.jsx)(ea,{className:"w-4 h-4 text-slate-400 group-hover:translate-x-1 transition-transform"})]}),t&&(0,_.jsxs)("button",{onClick:t,className:"w-full bg-slate-800 text-slate-400 font-semibold py-3 px-4 rounded-xl hover:bg-slate-700 hover:text-white transition-all flex items-center justify-center gap-2",children:[(0,_.jsx)(ei,{className:"w-4 h-4"}),(0,_.jsx)("span",{children:c?"Skip Login (Demo Mode)":"Continue in Demo Mode"})]})]}),(0,_.jsxs)("p",{className:"text-center text-xs text-slate-500 mt-6",children:[(0,_.jsx)(es,{className:"w-3 h-3 inline mr-1"}),"Secure Enterprise Access"]})]})]})};var ec=e.i(47167);(c=w||(w={})).STRING="string",c.NUMBER="number",c.INTEGER="integer",c.BOOLEAN="boolean",c.ARRAY="array",c.OBJECT="object",(d=N||(N={})).LANGUAGE_UNSPECIFIED="language_unspecified",d.PYTHON="python",(u=E||(E={})).OUTCOME_UNSPECIFIED="outcome_unspecified",u.OUTCOME_OK="outcome_ok",u.OUTCOME_FAILED="outcome_failed",u.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";let ed=["user","model","function","system"];(p=A||(A={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",p.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",p.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",p.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",p.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",p.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(h=C||(C={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",h.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",h.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",h.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",h.BLOCK_NONE="BLOCK_NONE",(m=S||(S={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",m.NEGLIGIBLE="NEGLIGIBLE",m.LOW="LOW",m.MEDIUM="MEDIUM",m.HIGH="HIGH",(f=j||(j={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",f.SAFETY="SAFETY",f.OTHER="OTHER",(g=R||(R={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",g.STOP="STOP",g.MAX_TOKENS="MAX_TOKENS",g.SAFETY="SAFETY",g.RECITATION="RECITATION",g.LANGUAGE="LANGUAGE",g.BLOCKLIST="BLOCKLIST",g.PROHIBITED_CONTENT="PROHIBITED_CONTENT",g.SPII="SPII",g.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",g.OTHER="OTHER",(y=O||(O={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",y.RETRIEVAL_QUERY="RETRIEVAL_QUERY",y.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",y.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",y.CLASSIFICATION="CLASSIFICATION",y.CLUSTERING="CLUSTERING",(b=T||(T={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",b.AUTO="AUTO",b.ANY="ANY",b.NONE="NONE",(x=I||(I={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",x.MODE_DYNAMIC="MODE_DYNAMIC";class eu extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ep extends eu{constructor(e,t){super(e),this.response=t}}class eh extends eu{constructor(e,t,s,a){super(e),this.status=t,this.statusText=s,this.errorDetails=a}}class em extends eu{}class ef extends eu{}(v=k||(k={})).GENERATE_CONTENT="generateContent",v.STREAM_GENERATE_CONTENT="streamGenerateContent",v.COUNT_TOKENS="countTokens",v.EMBED_CONTENT="embedContent",v.BATCH_EMBED_CONTENTS="batchEmbedContents";class eg{constructor(e,t,s,a,n){this.model=e,this.task=t,this.apiKey=s,this.stream=a,this.requestOptions=n}toString(){var e,t;let s=(null==(e=this.requestOptions)?void 0:e.apiVersion)||"v1beta",a=(null==(t=this.requestOptions)?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",n=`${a}/${s}/${this.model}:${this.task}`;return this.stream&&(n+="?alt=sse"),n}}async function ey(e){var t,s;let a,n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",(s=e.requestOptions,a=[],(null==s?void 0:s.apiClient)&&a.push(s.apiClient),a.push("genai-js/0.24.1"),a.join(" "))),n.append("x-goog-api-key",e.apiKey);let r=null==(t=e.requestOptions)?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(e){throw new em(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${e.message}`)}for(let[e,t]of r.entries()){if("x-goog-api-key"===e)throw new em(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new em(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function eb(e,t,s,a,n,r){let i=new eg(e,t,s,a,r);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let s=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>s.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{s.abort()}),t.signal=s.signal}return t}(r)),{method:"POST",headers:await ey(i),body:n})}}async function ex(e,t,s,a,n,r={},i=fetch){let{url:o,fetchOptions:l}=await eb(e,t,s,a,n,r);return ev(o,l,i)}async function ev(e,t,s=fetch){let a;try{a=await s(e,t)}catch(s){var n=s,r=e;let t=n;throw"AbortError"===t.name?(t=new ef(`Request aborted when fetching ${r.toString()}: ${n.message}`)).stack=n.stack:n instanceof eh||n instanceof em||((t=new eu(`Error fetching from ${r.toString()}: ${n.message}`)).stack=n.stack),t}return a.ok||await ew(a,e),a}async function ew(e,t){let s,a="";try{let t=await e.json();a=t.error.message,t.error.details&&(a+=` ${JSON.stringify(t.error.details)}`,s=t.error.details)}catch(e){}throw new eh(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${a}`,e.status,e.statusText,s)}function eN(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),eC(e.candidates[0]))throw new ep(`${eS(e)}`,e);return function(e){var t,s,a,n;let r=[];if(null==(s=null==(t=e.candidates)?void 0:t[0].content)?void 0:s.parts)for(let t of null==(n=null==(a=e.candidates)?void 0:a[0].content)?void 0:n.parts)t.text&&r.push(t.text),t.executableCode&&r.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&r.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}(e)}if(e.promptFeedback)throw new ep(`Text not available. ${eS(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eC(e.candidates[0]))throw new ep(`${eS(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),eE(e)[0]}if(e.promptFeedback)throw new ep(`Function call not available. ${eS(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eC(e.candidates[0]))throw new ep(`${eS(e)}`,e);return eE(e)}if(e.promptFeedback)throw new ep(`Function call not available. ${eS(e)}`,e)},e}function eE(e){var t,s,a,n;let r=[];if(null==(s=null==(t=e.candidates)?void 0:t[0].content)?void 0:s.parts)for(let t of null==(n=null==(a=e.candidates)?void 0:a[0].content)?void 0:n.parts)t.functionCall&&r.push(t.functionCall);return r.length>0?r:void 0}let eA=[R.RECITATION,R.SAFETY,R.LANGUAGE];function eC(e){return!!e.finishReason&&eA.includes(e.finishReason)}function eS(e){var t,s,a;let n="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)n+="Response was blocked",(null==(t=e.promptFeedback)?void 0:t.blockReason)&&(n+=` due to ${e.promptFeedback.blockReason}`),(null==(s=e.promptFeedback)?void 0:s.blockReasonMessage)&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null==(a=e.candidates)?void 0:a[0]){let t=e.candidates[0];eC(t)&&(n+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(n+=`: ${t.finishMessage}`))}return n}function ej(e){return this instanceof ej?(this.v=e,this):new ej(e)}"function"==typeof SuppressedError&&SuppressedError;let eR=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function eO(e){let t=[],s=e.getReader();for(;;){let{done:e,value:a}=await s.read();if(e)return eN(function(e){let t=e[e.length-1],s={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let a of t.candidates)if(s.candidates||(s.candidates=[]),s.candidates[e]||(s.candidates[e]={index:e}),s.candidates[e].citationMetadata=a.citationMetadata,s.candidates[e].groundingMetadata=a.groundingMetadata,s.candidates[e].finishReason=a.finishReason,s.candidates[e].finishMessage=a.finishMessage,s.candidates[e].safetyRatings=a.safetyRatings,a.content&&a.content.parts){s.candidates[e].content||(s.candidates[e].content={role:a.content.role||"user",parts:[]});let t={};for(let n of a.content.parts)n.text&&(t.text=n.text),n.functionCall&&(t.functionCall=n.functionCall),n.executableCode&&(t.executableCode=n.executableCode),n.codeExecutionResult&&(t.codeExecutionResult=n.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),s.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(s.usageMetadata=t.usageMetadata)}return s}(t));t.push(a)}}async function eT(e,t,s,a){return function(e){let t,[s,a]=(t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})).getReader(),new ReadableStream({start(e){let s="";return function a(){return t.read().then(({value:t,done:n})=>{let r;if(n)return s.trim()?void e.error(new eu("Failed to parse stream")):void e.close();let i=(s+=t).match(eR);for(;i;){try{r=JSON.parse(i[1])}catch(t){e.error(new eu(`Error parsing JSON response: "${i[1]}"`));return}e.enqueue(r),i=(s=s.substring(i[0].length)).match(eR)}return a()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new ef("Request aborted when reading from the stream"):new eu("Error reading from the stream")})}()}})).tee();return{stream:function(e){return function(e,t,s){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var a,n=s.apply(e,t||[]),r=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(e){n[e]&&(a[e]=function(t){return new Promise(function(s,a){r.push([e,t,s,a])>1||o(e,t)})})}function o(e,t){try{var s;(s=n[e](t)).value instanceof ej?Promise.resolve(s.value.v).then(l,c):d(r[0][2],s)}catch(e){d(r[0][3],e)}}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),r.shift(),r.length&&o(r[0][0],r[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:s}=yield ej(t.read());if(s)break;yield yield ej(eN(e))}})}(s),response:eO(a)}}(await ex(t,k.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),a))}async function eI(e,t,s,a){let n=await ex(t,k.GENERATE_CONTENT,e,!1,JSON.stringify(s),a);return{response:eN(await n.json())}}function ek(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)if(!e.role)return{role:"system",parts:e.parts};else return e}}function e_(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let s of e)"string"==typeof s?t.push({text:s}):t.push(s);var s=t;let a={role:"user",parts:[]},n={role:"function",parts:[]},r=!1,i=!1;for(let e of s)"functionResponse"in e?(n.parts.push(e),i=!0):(a.parts.push(e),r=!0);if(r&&i)throw new eu("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new eu("No content is provided for sending chat message.");return r?a:n}function eP(e){let t;return t=e.contents?e:{contents:[e_(e)]},e.systemInstruction&&(t.systemInstruction=ek(e.systemInstruction)),t}let eM=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],eL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function eU(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;let s=null==(t=e.candidates[0])?void 0:t.content;if(void 0===s||void 0===s.parts||0===s.parts.length)return!1;for(let e of s.parts)if(void 0===e||0===Object.keys(e).length||void 0!==e.text&&""===e.text)return!1;return!0}let eD="SILENT_ERROR";class eF{constructor(e,t,s,a={}){this.model=t,this.params=s,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==s?void 0:s.history)&&(!function(e){let t=!1;for(let s of e){let{role:e,parts:a}=s;if(!t&&"user"!==e)throw new eu(`First content should be with role 'user', got ${e}`);if(!ed.includes(e))throw new eu(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(ed)}`);if(!Array.isArray(a))throw new eu("Content should have 'parts' property with an array of Parts");if(0===a.length)throw new eu("Each Content should have at least one part");let n={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of a)for(let t of eM)t in e&&(n[t]+=1);let r=eL[e];for(let t of eM)if(!r.includes(t)&&n[t]>0)throw new eu(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var s,a,n,r,i,o;let l;await this._sendPromise;let c=e_(e),d={safetySettings:null==(s=this.params)?void 0:s.safetySettings,generationConfig:null==(a=this.params)?void 0:a.generationConfig,tools:null==(n=this.params)?void 0:n.tools,toolConfig:null==(r=this.params)?void 0:r.toolConfig,systemInstruction:null==(i=this.params)?void 0:i.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,c]},u=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>eI(this._apiKey,this.model,d,u)).then(e=>{var t;if(eU(e.response)){this._history.push(c);let s=Object.assign({parts:[],role:"model"},null==(t=e.response.candidates)?void 0:t[0].content);this._history.push(s)}else{let t=eS(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,l}async sendMessageStream(e,t={}){var s,a,n,r,i,o;await this._sendPromise;let l=e_(e),c={safetySettings:null==(s=this.params)?void 0:s.safetySettings,generationConfig:null==(a=this.params)?void 0:a.generationConfig,tools:null==(n=this.params)?void 0:n.tools,toolConfig:null==(r=this.params)?void 0:r.toolConfig,systemInstruction:null==(i=this.params)?void 0:i.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t),u=eT(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then(()=>u).catch(e=>{throw Error(eD)}).then(e=>e.response).then(e=>{if(eU(e)){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=eS(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==eD&&console.error(e)}),u}}async function eB(e,t,s,a){return(await ex(t,k.COUNT_TOKENS,e,!1,JSON.stringify(s),a)).json()}async function eG(e,t,s,a){return(await ex(t,k.EMBED_CONTENT,e,!1,JSON.stringify(s),a)).json()}async function e$(e,t,s,a){let n=s.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await ex(t,k.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),a)).json()}class eH{constructor(e,t,s={}){this.apiKey=e,this._requestOptions=s,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=ek(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var s;let a=eP(e),n=Object.assign(Object.assign({},this._requestOptions),t);return eI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(s=this.cachedContent)?void 0:s.name},a),n)}async generateContentStream(e,t={}){var s;let a=eP(e),n=Object.assign(Object.assign({},this._requestOptions),t);return eT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(s=this.cachedContent)?void 0:s.name},a),n)}startChat(e){var t;return new eF(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(t=this.cachedContent)?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let s=function(e,t){var s;let a={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null==(s=null==t?void 0:t.cachedContent)?void 0:s.name,contents:[]},n=null!=e.generateContentRequest;if(e.contents){if(n)throw new em("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(n)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{let t=e_(e);a.contents=[t]}return{generateContentRequest:a}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),t);return eB(this.apiKey,this.model,s,a)}async embedContent(e,t={}){let s="string"==typeof e||Array.isArray(e)?{content:e_(e)}:e,a=Object.assign(Object.assign({},this._requestOptions),t);return eG(this.apiKey,this.model,s,a)}async batchEmbedContents(e,t={}){let s=Object.assign(Object.assign({},this._requestOptions),t);return e$(this.apiKey,this.model,e,s)}}class eq{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new eu("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new eH(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,s){if(!e.name)throw new em("Cached content must contain a `name` field.");if(!e.model)throw new em("Cached content must contain a `model` field.");for(let s of["model","systemInstruction"])if((null==t?void 0:t[s])&&e[s]&&(null==t?void 0:t[s])!==e[s]){if("model"===s&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new em(`Different value for "${s}" specified in modelParams (${t[s]}) and cachedContent (${e[s]})`)}let a=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new eH(this.apiKey,a,s)}}let eY={get url(){return`file://${e.P("src/services/geminiService.ts")}`}};async function eV(e,t,s){var a;let n,r=(((a="VITE_GEMINI_API_KEY",n=(n=(void 0!==ec.default&&ec.default.env&&ec.default.env[a]?ec.default.env[a]:eY.env&&eY.env[a]?eY.env[a]:null)||"")?n.trim():"").startsWith('"')&&n.endsWith('"')||n.startsWith("'")&&n.endsWith("'"))&&(n=n.slice(1,-1)),n);if(r?console.log(`[Gemini Service] Initializing with key starting with: ${r.substring(0,4)}... (Length: ${r.length})`):console.warn("[Gemini Service] No API Key found in environment variables."),!r||"undefined"===r||"null"===r)throw Error("System configuration error: API Key is missing or undefined.");let i=new eq(r),o=`
    You are an expert Voice AI Configuration Admin.
    Your job is to generate a structured JSON configuration for a Voice AI agent based on a short business description provided by the user.
    
    If "REAL WORLD RESEARCH DATA" is provided, prioritize that information. If the research data is missing specific fields (like specific staff names or detailed hours), use your knowledge to invent plausible ones that fit the context.
    
    Populate the following sections:
    - Business Metadata
        - Services (Invent plausible services with durations)
    - Locations (Invent a plausible location)
        - Resources (Invent staff or rooms if applicable)
    - Data Fields (Recommend mandatory fields)
    - Conversation Rules (Match the tone to the business type)
        - Safety Boundaries (Relevant to the industry)
        - VAPI Configuration (Crucial: Generate a specialized System Prompt and Knowledge Base)
    
    ${s?`
    INDUSTRY TEMPLATE CONTEXT:
    The user has selected the "${s.name}" industry.
    - Base System Prompt Concept: ${s.systemPrompt}
    - Recommended First Message Style: ${s.firstMessage}
    - Mandatory Fields to include: ${s.mandatoryFields.join(", ")}
    - Suggested Services: ${s.suggestedServices.join(", ")}
    - Tone: ${s.defaultTone}
    
    Please refine and expand upon these template items to fit the specific business description provided.
    `:""}

    FOR VAPI SYSTEM PROMPT:
    Use this EXACT template, replacing {{COMPANY_NAME}} and {{DEPARTMENT_NAME}} with generated values appropriate for the business:
    "AI Assistant is a sophisticated AI training assistant, crafted by experts in user support and AI development at {{COMPANY_NAME}} within the {{DEPARTMENT_NAME}} team. Designed with the persona of a seasoned user support professional, AI Assistant combines deep technical knowledge with a strong sense of emotional intelligence. AI Assistant’s primary role is to serve as a dynamic training platform for user support agents, simulating a broad range of service scenarios, from basic inquiries to complex problem-solving challenges.
    
    AI Assistant’s advanced capabilities allow it to replicate diverse user service situations, making it an invaluable tool for training purposes. It guides new agents through simulated interactions, offering real-time feedback and guidance to refine skills in handling user needs with patience, empathy, and professionalism. AI Assistant ensures every trainee learns to listen actively, respond thoughtfully, and uphold the highest standards of user care.
    
    Primary Mode of Interaction
    
    AI Assistant interacts primarily through voice, accurately interpreting spoken queries and responding naturally through audio. This design prepares trainees for real user conversations and live call environments. AI Assistant is engineered to recognize and adapt to emotional cues in speech, allowing trainees to practice managing emotional nuances with confidence and care.
    
    Training Guidance
    
    AI Assistant encourages trainees to practice active listening by acknowledging user queries with clear confirmation of engagement, such as expressing presence and readiness to help.
    
    AI Assistant emphasizes clear and empathetic communication, always tailored to the specific context of each interaction.
    
    AI Assistant demonstrates how to handle unclear or complex user concerns by asking thoughtful, open-ended clarifying questions in a natural and human manner.
    
    AI Assistant teaches trainees to express empathy and understanding, particularly when users are frustrated or dissatisfied, ensuring concerns are addressed with care and a strong focus on resolution.
    
    AI Assistant prepares agents to transition interactions smoothly to human colleagues when appropriate, reinforcing the importance of human connection in sensitive or complex situations.
    
    AI Assistant’s overarching mission is to strengthen the human side of user support through immersive, scenario-based training. It is not merely an answer engine, but a refined training platform designed to develop knowledgeable, empathetic, and adaptable user support professionals.
    
    Additional Instruction
    
    AI Assistant must not use numeric characters in any response."
    
    FOR VAPI KNOWLEDGE BASE:
    Generate 10 FAQs specific to this business in Markdown format.
    
    FOR VAPI VOICE SETTINGS:
    Always use "vapi" for voiceProvider and "Mia" for voiceId.
    
    FOR VAPI MODEL SETTINGS:
    Use "openai" for provider and "gpt-4o-mini" for model by default, but you can also use these providers if appropriate: "groq", "deepseek", "google", "anthropic", "mistral", "perplexity-ai", "xai".
    Set temperature to 0.3.
    
    FOR VAPI TRANSCRIBER SETTINGS:
    Always use "deepgram" for provider and "nova-2" for model by default for high accuracy. Set language to "en".

    FOR VAPI MESSAGE SETTINGS:
    Generate a "firstMessage" that is personalized to the business and the user (e.g., "Hello {{USER_NAME}}, thanks for calling GreenThumb Atlanta, how can I help you today?"). Use the {{USER_NAME}} placeholder to indicate where the user's name should be inserted. Ensure NO placeholders like {{COMPANY_NAME}} remain in the firstMessage, BUT DO keep {{USER_NAME}}.

    Ensure strict adherence to the schema provided.
  `,l={type:w.OBJECT,properties:{metadata:{type:w.OBJECT,properties:{businessName:{type:w.STRING},industry:{type:w.STRING},primaryUseCase:{type:w.STRING},targetUsers:{type:w.STRING},description:{type:w.STRING}},required:["businessName","industry","primaryUseCase","description"]},services:{type:w.ARRAY,items:{type:w.OBJECT,properties:{id:{type:w.STRING},name:{type:w.STRING},description:{type:w.STRING},durationMinutes:{type:w.INTEGER},bookingRules:{type:w.STRING}},required:["name","durationMinutes"]}},locations:{type:w.ARRAY,items:{type:w.OBJECT,properties:{id:{type:w.STRING},name:{type:w.STRING},mode:{type:w.STRING,enum:["Physical","Virtual","Hybrid"]},operatingDays:{type:w.ARRAY,items:{type:w.STRING}},operatingHours:{type:w.STRING},timeZone:{type:w.STRING}}}},resources:{type:w.ARRAY,items:{type:w.OBJECT,properties:{id:{type:w.STRING},name:{type:w.STRING},role:{type:w.STRING},availabilityRules:{type:w.STRING},selectionRequired:{type:w.BOOLEAN}}}},conversation:{type:w.OBJECT,properties:{tone:{type:w.STRING},formality:{type:w.STRING,enum:["Casual","Professional","Formal"]},speakingStyle:{type:w.STRING},speechPace:{type:w.STRING,enum:["Slow","Normal","Fast"]},smallTalkAllowed:{type:w.BOOLEAN},identityDisclosure:{type:w.STRING,enum:["Always","On Demand","Never"]}}},safety:{type:w.OBJECT,properties:{allowedTopics:{type:w.STRING},disallowedTopics:{type:w.STRING},complianceConstraints:{type:w.STRING}}},integrations:{type:w.OBJECT,properties:{firebase:{type:w.BOOLEAN},googleCalendar:{type:w.BOOLEAN}}},vapi:{type:w.OBJECT,properties:{systemPrompt:{type:w.STRING},provider:{type:w.STRING},model:{type:w.STRING},firstMessage:{type:w.STRING},temperature:{type:w.NUMBER},voiceProvider:{type:w.STRING},voiceId:{type:w.STRING},transcriber:{type:w.OBJECT,properties:{provider:{type:w.STRING},language:{type:w.STRING},model:{type:w.STRING}}},knowledgeBase:{type:w.STRING}},required:["systemPrompt","knowledgeBase","firstMessage"]}}},c=t?`Business Description: ${e}

REAL WORLD RESEARCH DATA (Priority):
${JSON.stringify(t,null,2)}

Please use the research data above to populate the JSON.`:`Business Description: ${e}`,d=null;for(let e of["gemini-2.0-flash","gemini-flash-latest","gemini-1.5-flash-8b","gemini-pro-latest"])try{console.log(`[Gemini Service] Trying model: ${e}`);let t=i.getGenerativeModel({model:e,systemInstruction:{role:"system",parts:[{text:o}]}}),s=await t.generateContent({contents:[{role:"user",parts:[{text:c}]}],generationConfig:{responseMimeType:"application/json",responseSchema:l}});return function(e){let t=JSON.parse(e.response.text());return{...t,metadata:{...t.metadata||{},createdAt:new Date().toISOString()},services:t.services?.map(e=>({...e,id:e.id||Math.random().toString(36).substring(2,9)}))||[],locations:t.locations?.map(e=>({...e,id:e.id||Math.random().toString(36).substring(2,9)}))||[],resources:t.resources?.map(e=>({...e,id:e.id||Math.random().toString(36).substring(2,9)}))||[],integrations:{firebase:!0,googleCalendar:!0,...t.integrations||{}},vapi:{provider:"OpenAI",model:"gpt-4o-mini",temperature:.3,voiceProvider:"vapi",voiceId:"Mia",transcriber:{provider:"deepgram",language:"en",model:"nova-2"},...t.vapi||{}}}}(s)}catch(s){d=s;let t=s.status||(s.message?.match(/\[(\d+)\]/)||[])[1];if("404"===t){console.warn(`[Gemini Service] Model ${e} not found (404).`);continue}if("429"===t){console.warn(`[Gemini Service] Quota exceeded for ${e}.`);continue}console.error(`[Gemini Service] Unexpected error with ${e}:`,s.message);continue}throw d||Error("All Gemini models failed.")}var eK=e.i(4708);function ez(e,t){return function(){return e.apply(t,arguments)}}let{toString:eW}=Object.prototype,{getPrototypeOf:eJ}=Object,{iterator:eX,toStringTag:eQ}=Symbol,eZ=(t=Object.create(null),e=>{let s=eW.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())}),e0=e=>(e=e.toLowerCase(),t=>eZ(t)===e),e1=e=>t=>typeof t===e,{isArray:e2}=Array,e4=e1("undefined");function e5(e){return null!==e&&!e4(e)&&null!==e.constructor&&!e4(e.constructor)&&e7(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let e3=e0("ArrayBuffer"),e6=e1("string"),e7=e1("function"),e8=e1("number"),e9=e=>null!==e&&"object"==typeof e,te=e=>{if("object"!==eZ(e))return!1;let t=eJ(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(eQ in e)&&!(eX in e)},tt=e0("Date"),ts=e0("File"),ta=e0("Blob"),tn=e0("FileList"),tr=e0("URLSearchParams"),[ti,to,tl,tc]=["ReadableStream","Request","Response","Headers"].map(e0);function td(e,t,{allOwnKeys:s=!1}={}){let a,n;if(null!=e)if("object"!=typeof e&&(e=[e]),e2(e))for(a=0,n=e.length;a<n;a++)t.call(null,e[a],a,e);else{let n;if(e5(e))return;let r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;for(a=0;a<i;a++)n=r[a],t.call(null,e[n],n,e)}}function tu(e,t){let s;if(e5(e))return null;t=t.toLowerCase();let a=Object.keys(e),n=a.length;for(;n-- >0;)if(t===(s=a[n]).toLowerCase())return s;return null}let tp="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:e.g,th=e=>!e4(e)&&e!==tp,tm=(s="u">typeof Uint8Array&&eJ(Uint8Array),e=>s&&e instanceof s),tf=e0("HTMLFormElement"),tg=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),ty=e0("RegExp"),tb=(e,t)=>{let s=Object.getOwnPropertyDescriptors(e),a={};td(s,(s,n)=>{let r;!1!==(r=t(s,n,e))&&(a[n]=r||s)}),Object.defineProperties(e,a)},tx=e0("AsyncFunction"),tv=(r="function"==typeof setImmediate,i=e7(tp.postMessage),r?setImmediate:i?(o=`axios@${Math.random()}`,l=[],tp.addEventListener("message",({source:e,data:t})=>{e===tp&&t===o&&l.length&&l.shift()()},!1),e=>{l.push(e),tp.postMessage(o,"*")}):e=>setTimeout(e)),tw="u">typeof queueMicrotask?queueMicrotask.bind(tp):void 0!==ec.default&&ec.default.nextTick||tv,tN={isArray:e2,isArrayBuffer:e3,isBuffer:e5,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||e7(e.append)&&("formdata"===(t=eZ(e))||"object"===t&&e7(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"u">typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e3(e.buffer)},isString:e6,isNumber:e8,isBoolean:e=>!0===e||!1===e,isObject:e9,isPlainObject:te,isEmptyObject:e=>{if(!e9(e)||e5(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:ti,isRequest:to,isResponse:tl,isHeaders:tc,isUndefined:e4,isDate:tt,isFile:ts,isBlob:ta,isRegExp:ty,isFunction:e7,isStream:e=>e9(e)&&e7(e.pipe),isURLSearchParams:tr,isTypedArray:tm,isFileList:tn,forEach:td,merge:function e(){let{caseless:t,skipUndefined:s}=th(this)&&this||{},a={},n=(n,r)=>{let i=t&&tu(a,r)||r;te(a[i])&&te(n)?a[i]=e(a[i],n):te(n)?a[i]=e({},n):e2(n)?a[i]=n.slice():s&&e4(n)||(a[i]=n)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&td(arguments[e],n);return a},extend:(e,t,s,{allOwnKeys:a}={})=>(td(t,(t,a)=>{s&&e7(t)?Object.defineProperty(e,a,{value:ez(t,s),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,a,{value:t,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:a}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,a)=>{e.prototype=Object.create(t.prototype,a),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,a)=>{let n,r,i,o={};if(t=t||{},null==e)return t;do{for(r=(n=Object.getOwnPropertyNames(e)).length;r-- >0;)i=n[r],(!a||a(i,e,t))&&!o[i]&&(t[i]=e[i],o[i]=!0);e=!1!==s&&eJ(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype)return t},kindOf:eZ,kindOfTest:e0,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;let a=e.indexOf(t,s);return -1!==a&&a===s},toArray:e=>{if(!e)return null;if(e2(e))return e;let t=e.length;if(!e8(t))return null;let s=Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{let s,a=(e&&e[eX]).call(e);for(;(s=a.next())&&!s.done;){let a=s.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let s,a=[];for(;null!==(s=e.exec(t));)a.push(s);return a},isHTMLForm:tf,hasOwnProperty:tg,hasOwnProp:tg,reduceDescriptors:tb,freezeMethods:e=>{tb(e,(t,s)=>{if(e7(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;if(e7(e[s])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},toObjectSet:(e,t)=>{let s={};return(e2(e)?e:String(e).split(t)).forEach(e=>{s[e]=!0}),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:tu,global:tp,isContextDefined:th,isSpecCompliantForm:function(e){return!!(e&&e7(e.append)&&"FormData"===e[eQ]&&e[eX])},toJSONObject:e=>{let t=Array(10),s=(e,a)=>{if(e9(e)){if(t.indexOf(e)>=0)return;if(e5(e))return e;if(!("toJSON"in e)){t[a]=e;let n=e2(e)?[]:{};return td(e,(e,t)=>{let r=s(e,a+1);e4(r)||(n[t]=r)}),t[a]=void 0,n}}return e};return s(e,0)},isAsyncFn:tx,isThenable:e=>e&&(e9(e)||e7(e))&&e7(e.then)&&e7(e.catch),setImmediate:tv,asap:tw,isIterable:e=>null!=e&&e7(e[eX])};var tE=e.i(67034);class tA extends Error{static from(e,t,s,a,n,r){let i=new tA(e.message,t||e.code,s,a,n);return i.cause=e,i.name=e.name,r&&Object.assign(i,r),i}constructor(e,t,s,a,n){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),s&&(this.config=s),a&&(this.request=a),n&&(this.response=n,this.status=n.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tN.toJSONObject(this.config),code:this.code,status:this.status}}}tA.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",tA.ERR_BAD_OPTION="ERR_BAD_OPTION",tA.ECONNABORTED="ECONNABORTED",tA.ETIMEDOUT="ETIMEDOUT",tA.ERR_NETWORK="ERR_NETWORK",tA.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",tA.ERR_DEPRECATED="ERR_DEPRECATED",tA.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",tA.ERR_BAD_REQUEST="ERR_BAD_REQUEST",tA.ERR_CANCELED="ERR_CANCELED",tA.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",tA.ERR_INVALID_URL="ERR_INVALID_URL";let tC=tA;function tS(e){return tN.isPlainObject(e)||tN.isArray(e)}function tj(e){return tN.endsWith(e,"[]")?e.slice(0,-2):e}function tR(e,t,s){return e?e.concat(t).map(function(e,t){return e=tj(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}let tO=tN.toFlatObject(tN,{},null,function(e){return/^is[A-Z]/.test(e)}),tT=function(e,t,s){if(!tN.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let a=(s=tN.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!tN.isUndefined(t[e])})).metaTokens,n=s.visitor||c,r=s.dots,i=s.indexes,o=(s.Blob||"u">typeof Blob&&Blob)&&tN.isSpecCompliantForm(t);if(!tN.isFunction(n))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(tN.isDate(e))return e.toISOString();if(tN.isBoolean(e))return e.toString();if(!o&&tN.isBlob(e))throw new tC("Blob is not supported. Use a Buffer instead.");return tN.isArrayBuffer(e)||tN.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):tE.Buffer.from(e):e}function c(e,s,n){let o=e;if(e&&!n&&"object"==typeof e)if(tN.endsWith(s,"{}"))s=a?s:s.slice(0,-2),e=JSON.stringify(e);else{var c;if(tN.isArray(e)&&(c=e,tN.isArray(c)&&!c.some(tS))||(tN.isFileList(e)||tN.endsWith(s,"[]"))&&(o=tN.toArray(e)))return s=tj(s),o.forEach(function(e,a){tN.isUndefined(e)||null===e||t.append(!0===i?tR([s],a,r):null===i?s:s+"[]",l(e))}),!1}return!!tS(e)||(t.append(tR(n,s,r),l(e)),!1)}let d=[],u=Object.assign(tO,{defaultVisitor:c,convertValue:l,isVisitable:tS});if(!tN.isObject(e))throw TypeError("data must be an object");return!function e(s,a){if(!tN.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+a.join("."));d.push(s),tN.forEach(s,function(s,r){!0===(!(tN.isUndefined(s)||null===s)&&n.call(t,s,tN.isString(r)?r.trim():r,a,u))&&e(s,a?a.concat(r):[r])}),d.pop()}}(e),t};function tI(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function tk(e,t){this._pairs=[],e&&tT(e,this,t)}let t_=tk.prototype;function tP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tM(e,t,s){let a;if(!t)return e;let n=s&&s.encode||tP,r=tN.isFunction(s)?{serialize:s}:s,i=r&&r.serialize;if(a=i?i(t,r):tN.isURLSearchParams(t)?t.toString():new tk(t,r).toString(n)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}t_.append=function(e,t){this._pairs.push([e,t])},t_.toString=function(e){let t=e?function(t){return e.call(this,t,tI)}:tI;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let tL=class{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){tN.forEach(this.handlers,function(t){null!==t&&e(t)})}},tU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tD="u">typeof URLSearchParams?URLSearchParams:tk,tF="u">typeof FormData?FormData:null,tB="u">typeof Blob?Blob:null,tG="u">typeof window&&"u">typeof document,t$="object"==typeof navigator&&navigator||void 0,tH=tG&&(!t$||0>["ReactNative","NativeScript","NS"].indexOf(t$.product)),tq="u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,tY=tG&&window.location.href||"http://localhost";e.s(["hasBrowserEnv",()=>tG,"hasStandardBrowserEnv",()=>tH,"hasStandardBrowserWebWorkerEnv",()=>tq,"navigator",()=>t$,"origin",()=>tY],57536);let tV={...e.i(57536),isBrowser:!0,classes:{URLSearchParams:tD,FormData:tF,Blob:tB},protocols:["http","https","file","blob","url","data"]},tK=function(e){if(tN.isFormData(e)&&tN.isFunction(e.entries)){let t={};return tN.forEachEntry(e,(e,s)=>{!function e(t,s,a,n){let r=t[n++];if("__proto__"===r)return!0;let i=Number.isFinite(+r),o=n>=t.length;return(r=!r&&tN.isArray(a)?a.length:r,o)?tN.hasOwnProp(a,r)?a[r]=[a[r],s]:a[r]=s:(a[r]&&tN.isObject(a[r])||(a[r]=[]),e(t,s,a[r],n)&&tN.isArray(a[r])&&(a[r]=function(e){let t,s,a={},n=Object.keys(e),r=n.length;for(t=0;t<r;t++)a[s=n[t]]=e[s];return a}(a[r]))),!i}(tN.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),s,t,0)}),t}return null},tz={transitional:tU,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let s,a=t.getContentType()||"",n=a.indexOf("application/json")>-1,r=tN.isObject(e);if(r&&tN.isHTMLForm(e)&&(e=new FormData(e)),tN.isFormData(e))return n?JSON.stringify(tK(e)):e;if(tN.isArrayBuffer(e)||tN.isBuffer(e)||tN.isStream(e)||tN.isFile(e)||tN.isBlob(e)||tN.isReadableStream(e))return e;if(tN.isArrayBufferView(e))return e.buffer;if(tN.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(r){if(a.indexOf("application/x-www-form-urlencoded")>-1){var i,o;return(i=e,o=this.formSerializer,tT(i,new tV.classes.URLSearchParams,{visitor:function(e,t,s,a){return tV.isNode&&tN.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...o})).toString()}if((s=tN.isFileList(e))||a.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return tT(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(r||n){t.setContentType("application/json",!1);var l=e;if(tN.isString(l))try{return(0,JSON.parse)(l),tN.trim(l)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(l)}return e}],transformResponse:[function(e){let t=this.transitional||tz.transitional,s=t&&t.forcedJSONParsing,a="json"===this.responseType;if(tN.isResponse(e)||tN.isReadableStream(e))return e;if(e&&tN.isString(e)&&(s&&!this.responseType||a)){let s=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!s&&a){if("SyntaxError"===e.name)throw tC.from(e,tC.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tV.classes.FormData,Blob:tV.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tN.forEach(["delete","get","head","post","put","patch"],e=>{tz.headers[e]={}});let tW=tN.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tJ=Symbol("internals");function tX(e){return e&&String(e).trim().toLowerCase()}function tQ(e){return!1===e||null==e?e:tN.isArray(e)?e.map(tQ):String(e)}function tZ(e,t,s,a,n){if(tN.isFunction(a))return a.call(this,t,s);if(n&&(t=s),tN.isString(t)){if(tN.isString(a))return -1!==t.indexOf(a);if(tN.isRegExp(a))return a.test(t)}}class t0{constructor(e){e&&this.set(e)}set(e,t,s){let a=this;function n(e,t,s){let n=tX(t);if(!n)throw Error("header name must be a non-empty string");let r=tN.findKey(a,n);r&&void 0!==a[r]&&!0!==s&&(void 0!==s||!1===a[r])||(a[r||t]=tQ(e))}let r=(e,t)=>tN.forEach(e,(e,s)=>n(e,s,t));if(tN.isPlainObject(e)||e instanceof this.constructor)r(e,t);else{let a;if(tN.isString(e)&&(e=e.trim())&&(a=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim()))){var i;let s,a,n,o;r((o={},(i=e)&&i.split("\n").forEach(function(e){n=e.indexOf(":"),s=e.substring(0,n).trim().toLowerCase(),a=e.substring(n+1).trim(),!s||o[s]&&tW[s]||("set-cookie"===s?o[s]?o[s].push(a):o[s]=[a]:o[s]=o[s]?o[s]+", "+a:a)}),o),t)}else if(tN.isObject(e)&&tN.isIterable(e)){let s={},a,n;for(let t of e){if(!tN.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(a=s[n])?tN.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}r(s,t)}else null!=e&&n(t,e,s)}return this}get(e,t){if(e=tX(e)){let s=tN.findKey(this,e);if(s){let e=this[s];if(!t)return e;if(!0===t){let t,s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=a.exec(e);)s[t[1]]=t[2];return s}if(tN.isFunction(t))return t.call(this,e,s);if(tN.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=tX(e)){let s=tN.findKey(this,e);return!!(s&&void 0!==this[s]&&(!t||tZ(this,this[s],s,t)))}return!1}delete(e,t){let s=this,a=!1;function n(e){if(e=tX(e)){let n=tN.findKey(s,e);n&&(!t||tZ(s,s[n],n,t))&&(delete s[n],a=!0)}}return tN.isArray(e)?e.forEach(n):n(e),a}clear(e){let t=Object.keys(this),s=t.length,a=!1;for(;s--;){let n=t[s];(!e||tZ(this,this[n],n,e,!0))&&(delete this[n],a=!0)}return a}normalize(e){let t=this,s={};return tN.forEach(this,(a,n)=>{let r=tN.findKey(s,n);if(r){t[r]=tQ(a),delete t[n];return}let i=e?n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s):String(n).trim();i!==n&&delete t[n],t[i]=tQ(a),s[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return tN.forEach(this,(s,a)=>{null!=s&&!1!==s&&(t[a]=e&&tN.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let s=new this(e);return t.forEach(e=>s.set(e)),s}static accessor(e){let t=(this[tJ]=this[tJ]={accessors:{}}).accessors,s=this.prototype;function a(e){let a=tX(e);if(!t[a]){let n;n=tN.toCamelCase(" "+e),["get","set","has"].forEach(t=>{Object.defineProperty(s,t+n,{value:function(s,a,n){return this[t].call(this,e,s,a,n)},configurable:!0})}),t[a]=!0}}return tN.isArray(e)?e.forEach(a):a(e),this}}function t1(e,t){let s=this||tz,a=t||s,n=t0.from(a.headers),r=a.data;return tN.forEach(e,function(e){r=e.call(s,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function t2(e){return!!(e&&e.__CANCEL__)}t0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),tN.reduceDescriptors(t0.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}}),tN.freezeMethods(t0);let t4=class extends tC{constructor(e,t,s){super(null==e?"canceled":e,tC.ERR_CANCELED,t,s),this.name="CanceledError",this.__CANCEL__=!0}};function t5(e,t,s){let a=s.config.validateStatus;!s.status||!a||a(s.status)?e(s):t(new tC("Request failed with status code "+s.status,[tC.ERR_BAD_REQUEST,tC.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}let t3=function(e,t){let s,a=Array(e=e||10),n=Array(e),r=0,i=0;return t=void 0!==t?t:1e3,function(o){let l=Date.now(),c=n[i];s||(s=l),a[r]=o,n[r]=l;let d=i,u=0;for(;d!==r;)u+=a[d++],d%=e;if((r=(r+1)%e)===i&&(i=(i+1)%e),l-s<t)return;let p=c&&l-c;return p?Math.round(1e3*u/p):void 0}},t6=function(e,t){let s,a,n=0,r=1e3/t,i=(t,r=Date.now())=>{n=r,s=null,a&&(clearTimeout(a),a=null),e(...t)};return[(...e)=>{let t=Date.now(),o=t-n;o>=r?i(e,t):(s=e,a||(a=setTimeout(()=>{a=null,i(s)},r-o)))},()=>s&&i(s)]},t7=(e,t,s=3)=>{let a=0,n=t3(50,250);return t6(s=>{let r=s.loaded,i=s.lengthComputable?s.total:void 0,o=r-a,l=n(o);a=r,e({loaded:r,total:i,progress:i?r/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&r<=i?(i-r)/l:void 0,event:s,lengthComputable:null!=i,[t?"download":"upload"]:!0})},s)},t8=(e,t)=>{let s=null!=e;return[a=>t[0]({lengthComputable:s,total:e,loaded:a}),t[1]]},t9=e=>(...t)=>tN.asap(()=>e(...t)),se=tV.hasStandardBrowserEnv?(a=new URL(tV.origin),n=tV.navigator&&/(msie|trident)/i.test(tV.navigator.userAgent),e=>(e=new URL(e,tV.origin),a.protocol===e.protocol&&a.host===e.host&&(n||a.port===e.port))):()=>!0,st=tV.hasStandardBrowserEnv?{write(e,t,s,a,n,r,i){if("u"<typeof document)return;let o=[`${e}=${encodeURIComponent(t)}`];tN.isNumber(s)&&o.push(`expires=${new Date(s).toUTCString()}`),tN.isString(a)&&o.push(`path=${a}`),tN.isString(n)&&o.push(`domain=${n}`),!0===r&&o.push("secure"),tN.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(e){if("u"<typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function ss(e,t,s){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||!1==s)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let sa=e=>e instanceof t0?{...e}:e;function sn(e,t){t=t||{};let s={};function a(e,t,s,a){return tN.isPlainObject(e)&&tN.isPlainObject(t)?tN.merge.call({caseless:a},e,t):tN.isPlainObject(t)?tN.merge({},t):tN.isArray(t)?t.slice():t}function n(e,t,s,n){return tN.isUndefined(t)?tN.isUndefined(e)?void 0:a(void 0,e,s,n):a(e,t,s,n)}function r(e,t){if(!tN.isUndefined(t))return a(void 0,t)}function i(e,t){return tN.isUndefined(t)?tN.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function o(s,n,r){return r in t?a(s,n):r in e?a(void 0,s):void 0}let l={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,s)=>n(sa(e),sa(t),s,!0)};return tN.forEach(Object.keys({...e,...t}),function(a){let r=l[a]||n,i=r(e[a],t[a],a);tN.isUndefined(i)&&r!==o||(s[a]=i)}),s}let sr=e=>{let t=sn({},e),{data:s,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:r,headers:i,auth:o}=t;if(t.headers=i=t0.from(i),t.url=tM(ss(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),tN.isFormData(s)){if(tV.hasStandardBrowserEnv||tV.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(tN.isFunction(s.getHeaders)){let e=s.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,s])=>{t.includes(e.toLowerCase())&&i.set(e,s)})}}if(tV.hasStandardBrowserEnv&&(a&&tN.isFunction(a)&&(a=a(t)),a||!1!==a&&se(t.url))){let e=n&&r&&st.read(r);e&&i.set(n,e)}return t},si="u">typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){var a;let n,r,i,o,l,c,d=sr(e),u=d.data,p=t0.from(d.headers).normalize(),{responseType:h,onUploadProgress:m,onDownloadProgress:f}=d;function g(){o&&o(),l&&l(),d.cancelToken&&d.cancelToken.unsubscribe(n),d.signal&&d.signal.removeEventListener("abort",n)}let y=new XMLHttpRequest;function b(){if(!y)return;let a=t0.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders());t5(function(e){t(e),g()},function(e){s(e),g()},{data:h&&"text"!==h&&"json"!==h?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:a,config:e,request:y}),y=null}y.open(d.method.toUpperCase(),d.url,!0),y.timeout=d.timeout,"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||4!==y.readyState||(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(b)},y.onabort=function(){y&&(s(new tC("Request aborted",tC.ECONNABORTED,e,y)),y=null)},y.onerror=function(t){let a=new tC(t&&t.message?t.message:"Network Error",tC.ERR_NETWORK,e,y);a.event=t||null,s(a),y=null},y.ontimeout=function(){let t=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",a=d.transitional||tU;d.timeoutErrorMessage&&(t=d.timeoutErrorMessage),s(new tC(t,a.clarifyTimeoutError?tC.ETIMEDOUT:tC.ECONNABORTED,e,y)),y=null},void 0===u&&p.setContentType(null),"setRequestHeader"in y&&tN.forEach(p.toJSON(),function(e,t){y.setRequestHeader(t,e)}),tN.isUndefined(d.withCredentials)||(y.withCredentials=!!d.withCredentials),h&&"json"!==h&&(y.responseType=d.responseType),f&&([i,l]=t7(f,!0),y.addEventListener("progress",i)),m&&y.upload&&([r,o]=t7(m),y.upload.addEventListener("progress",r),y.upload.addEventListener("loadend",o)),(d.cancelToken||d.signal)&&(n=t=>{y&&(s(!t||t.type?new t4(null,e,y):t),y.abort(),y=null)},d.cancelToken&&d.cancelToken.subscribe(n),d.signal&&(d.signal.aborted?n():d.signal.addEventListener("abort",n)));let x=(a=d.url,(c=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a))&&c[1]||"");x&&-1===tV.protocols.indexOf(x)?s(new tC("Unsupported protocol "+x+":",tC.ERR_BAD_REQUEST,e)):y.send(u||null)})},so=function*(e,t){let s,a=e.byteLength;if(!t||a<t)return void(yield e);let n=0;for(;n<a;)s=n+t,yield e.slice(n,s),n=s},sl=async function*(e,t){for await(let s of sc(e))yield*so(s,t)},sc=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},sd=(e,t,s,a)=>{let n,r=sl(e,t),i=0,o=e=>{!n&&(n=!0,a&&a(e))};return new ReadableStream({async pull(e){try{let{done:t,value:a}=await r.next();if(t){o(),e.close();return}let n=a.byteLength;if(s){let e=i+=n;s(e)}e.enqueue(new Uint8Array(a))}catch(e){throw o(e),e}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},{isFunction:su}=tN,sp=(({Request:e,Response:t})=>({Request:e,Response:t}))(tN.global),{ReadableStream:sh,TextEncoder:sm}=tN.global,sf=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},sg=e=>{let t,{fetch:s,Request:a,Response:n}=e=tN.merge.call({skipUndefined:!0},sp,e),r=s?su(s):"function"==typeof fetch,i=su(a),o=su(n);if(!r)return!1;let l=r&&su(sh),c=r&&("function"==typeof sm?(t=new sm,e=>t.encode(e)):async e=>new Uint8Array(await new a(e).arrayBuffer())),d=i&&l&&sf(()=>{let e=!1,t=new a(tV.origin,{body:new sh,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=o&&l&&sf(()=>tN.isReadableStream(new n("").body)),p={stream:u&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{p[e]||(p[e]=(t,s)=>{let a=t&&t[e];if(a)return a.call(t);throw new tC(`Response type '${e}' is not supported`,tC.ERR_NOT_SUPPORT,s)})});let h=async e=>{if(null==e)return 0;if(tN.isBlob(e))return e.size;if(tN.isSpecCompliantForm(e)){let t=new a(tV.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return tN.isArrayBufferView(e)||tN.isArrayBuffer(e)?e.byteLength:(tN.isURLSearchParams(e)&&(e+=""),tN.isString(e))?(await c(e)).byteLength:void 0},m=async(e,t)=>{let s=tN.toFiniteNumber(e.getContentLength());return null==s?h(t):s};return async e=>{let t,{url:r,method:o,data:l,signal:c,cancelToken:h,timeout:f,onDownloadProgress:g,onUploadProgress:y,responseType:b,headers:x,withCredentials:v="same-origin",fetchOptions:w}=sr(e),N=s||fetch;b=b?(b+"").toLowerCase():"text";let E=((e,t)=>{let{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,a=new AbortController,n=function(e){if(!s){s=!0,i();let t=e instanceof Error?e:this.reason;a.abort(t instanceof tC?t:new t4(t instanceof Error?t.message:t))}},r=t&&setTimeout(()=>{r=null,n(new tC(`timeout of ${t}ms exceeded`,tC.ETIMEDOUT))},t),i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));let{signal:o}=a;return o.unsubscribe=()=>tN.asap(i),o}})([c,h&&h.toAbortSignal()],f),A=null,C=E&&E.unsubscribe&&(()=>{E.unsubscribe()});try{if(y&&d&&"get"!==o&&"head"!==o&&0!==(t=await m(x,l))){let e,s=new a(r,{method:"POST",body:l,duplex:"half"});if(tN.isFormData(l)&&(e=s.headers.get("content-type"))&&x.setContentType(e),s.body){let[e,a]=t8(t,t7(t9(y)));l=sd(s.body,65536,e,a)}}tN.isString(v)||(v=v?"include":"omit");let s=i&&"credentials"in a.prototype,c={...w,signal:E,method:o.toUpperCase(),headers:x.normalize().toJSON(),body:l,duplex:"half",credentials:s?v:void 0};A=i&&new a(r,c);let h=await (i?N(A,w):N(r,c)),f=u&&("stream"===b||"response"===b);if(u&&(g||f&&C)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});let t=tN.toFiniteNumber(h.headers.get("content-length")),[s,a]=g&&t8(t,t7(t9(g),!0))||[];h=new n(sd(h.body,65536,s,()=>{a&&a(),C&&C()}),e)}b=b||"text";let S=await p[tN.findKey(p,b)||"text"](h,e);return!f&&C&&C(),await new Promise((t,s)=>{t5(t,s,{data:S,headers:t0.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:A})})}catch(t){if(C&&C(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new tC("Network Error",tC.ERR_NETWORK,e,A),{cause:t.cause||t});throw tC.from(t,t&&t.code,e,A)}}},sy=new Map,sb=e=>{let t=e&&e.env||{},{fetch:s,Request:a,Response:n}=t,r=[a,n,s],i=r.length,o,l,c=sy;for(;i--;)o=r[i],void 0===(l=c.get(o))&&c.set(o,l=i?new Map:sg(t)),c=l;return l};sb();let sx={http:null,xhr:si,fetch:{get:sb}};tN.forEach(sx,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let sv=e=>`- ${e}`,sw=e=>tN.isFunction(e)||null===e||!1===e,sN=function(e,t){let s,a,{length:n}=e=tN.isArray(e)?e:[e],r={};for(let i=0;i<n;i++){let n;if(a=s=e[i],!sw(s)&&void 0===(a=sx[(n=String(s)).toLowerCase()]))throw new tC(`Unknown adapter '${n}'`);if(a&&(tN.isFunction(a)||(a=a.get(t))))break;r[n||"#"+i]=a}if(!a){let e=Object.entries(r).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new tC("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(sv).join("\n"):" "+sv(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a};function sE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new t4(null,e)}function sA(e){return sE(e),e.headers=t0.from(e.headers),e.data=t1.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sN(e.adapter||tz.adapter,e)(e).then(function(t){return sE(e),t.data=t1.call(e,e.transformResponse,t),t.headers=t0.from(t.headers),t},function(t){return!t2(t)&&(sE(e),t&&t.response&&(t.response.data=t1.call(e,e.transformResponse,t.response),t.response.headers=t0.from(t.response.headers))),Promise.reject(t)})}let sC="1.13.4",sS={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sS[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});let sj={};sS.transitional=function(e,t,s){function a(e,t){return"[Axios v"+sC+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,n,r)=>{if(!1===e)throw new tC(a(n," has been removed"+(t?" in "+t:"")),tC.ERR_DEPRECATED);return t&&!sj[n]&&(sj[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,n,r)}},sS.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};let sR=function(e,t,s){if("object"!=typeof e)throw new tC("options must be an object",tC.ERR_BAD_OPTION_VALUE);let a=Object.keys(e),n=a.length;for(;n-- >0;){let r=a[n],i=t[r];if(i){let t=e[r],s=void 0===t||i(t,r,e);if(!0!==s)throw new tC("option "+r+" must be "+s,tC.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new tC("Unknown option "+r,tC.ERR_BAD_OPTION)}};class sO{constructor(e){this.defaults=e||{},this.interceptors={request:new tL,response:new tL}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let s=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?s&&!String(e.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+s):e.stack=s}catch(e){}}throw e}}_request(e,t){let s,a;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:n,paramsSerializer:r,headers:i}=t=sn(this.defaults,t);void 0!==n&&sR(n,{silentJSONParsing:sS.transitional(sS.boolean),forcedJSONParsing:sS.transitional(sS.boolean),clarifyTimeoutError:sS.transitional(sS.boolean)},!1),null!=r&&(tN.isFunction(r)?t.paramsSerializer={serialize:r}:sR(r,{encode:sS.function,serialize:sS.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),sR(t,{baseUrl:sS.spelling("baseURL"),withXsrfToken:sS.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&tN.merge(i.common,i[t.method]);i&&tN.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=t0.concat(o,i);let l=[],c=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(c=c&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let d=[];this.interceptors.response.forEach(function(e){d.push(e.fulfilled,e.rejected)});let u=0;if(!c){let e=[sA.bind(this),void 0];for(e.unshift(...l),e.push(...d),a=e.length,s=Promise.resolve(t);u<a;)s=s.then(e[u++],e[u++]);return s}a=l.length;let p=t;for(;u<a;){let e=l[u++],t=l[u++];try{p=e(p)}catch(e){t.call(this,e);break}}try{s=sA.call(this,p)}catch(e){return Promise.reject(e)}for(u=0,a=d.length;u<a;)s=s.then(d[u++],d[u++]);return s}getUri(e){return tM(ss((e=sn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}tN.forEach(["delete","get","head","options"],function(e){sO.prototype[e]=function(t,s){return this.request(sn(s||{},{method:e,url:t,data:(s||{}).data}))}}),tN.forEach(["post","put","patch"],function(e){function t(t){return function(s,a,n){return this.request(sn(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}sO.prototype[e]=t(),sO.prototype[e+"Form"]=t(!0)});class sT{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t,a=new Promise(e=>{s.subscribe(e),t=e}).then(e);return a.cancel=function(){s.unsubscribe(t)},a},e(function(e,a,n){s.reason||(s.reason=new t4(e,a,n),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new sT(function(t){e=t}),cancel:e}}}let sI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(sI).forEach(([e,t])=>{sI[t]=e});let sk=function e(t){let s=new sO(t),a=ez(sO.prototype.request,s);return tN.extend(a,sO.prototype,s,{allOwnKeys:!0}),tN.extend(a,s,null,{allOwnKeys:!0}),a.create=function(s){return e(sn(t,s))},a}(tz);sk.Axios=sO,sk.CanceledError=t4,sk.CancelToken=sT,sk.isCancel=t2,sk.VERSION=sC,sk.toFormData=tT,sk.AxiosError=tC,sk.Cancel=sk.CanceledError,sk.all=function(e){return Promise.all(e)},sk.spread=function(e){return function(t){return e.apply(null,t)}},sk.isAxiosError=function(e){return tN.isObject(e)&&!0===e.isAxiosError},sk.mergeConfig=sn,sk.AxiosHeaders=t0,sk.formToJSON=e=>tK(tN.isHTMLForm(e)?new FormData(e):e),sk.getAdapter=sN,sk.HttpStatusCode=sI,sk.default=sk;let s_={get url(){return`file://${e.P("src/services/vapiService.ts")}`}},sP=async e=>{let t=void 0!==ec.default&&ec.default.env&&1?"bacd6347-5d42-44a5-be80-b6cdf89e4967":s_.env&&s_.env.VITE_VAPI_PRIVATE_KEY?s_.env.VITE_VAPI_PRIVATE_KEY:null;if(!t)throw Error("Missing VAPI Private Key. Cannot deploy assistant.");let s=e.metadata.businessName||"the company",a=e.metadata.industry||"Voice AI Support",n=e.vapi.systemPrompt.replace(/{{COMPANY_NAME}}/g,s).replace(/{{Company name}}/gi,s).replace(/{{DEPARTMENT_NAME}}/g,a),r=(e.vapi.firstMessage||`Hello, thank you for calling ${s}!`).replace(/{{COMPANY_NAME}}/g,s).replace(/{{Company name}}/gi,s).replace(/{{USER_NAME}}/gi,e.vapi.userName||"there").replace(/{{Name}}/gi,e.vapi.userName||"there").replace(/{{User Name}}/gi,e.vapi.userName||"there").replace(/{{First Name}}/gi,(e.vapi.userName||"there").split(" ")[0]),i={provider:String(e.vapi.provider||"openai").toLowerCase(),model:String(e.vapi.model||"gpt-4o-mini").toLowerCase(),messages:[{role:"system",content:`${n}

# USER CONTEXT
${e.vapi.userName||e.vapi.userEmail||e.vapi.userPhone?`Information about the user is already known:
`+(e.vapi.userName?`- Name: ${e.vapi.userName}
`:"")+(e.vapi.userEmail?`- Email: ${e.vapi.userEmail}
`:"")+(e.vapi.userPhone?`- Phone: ${e.vapi.userPhone}
`:"")+"DO NOT ask for these details as they have already been provided.":"No specific user information provided yet. Collect Name, Email, and Phone if required by the workflow."}`}],temperature:Number(e.vapi.temperature||.3)},o={provider:String(e.vapi.voiceProvider||"vapi").toLowerCase(),voiceId:String(e.vapi.voiceId||"Mia")},l=null,c=String(e.vapi.transcriber.provider||"deepgram").toLowerCase();l="openai"===c?{provider:"openai"}:{provider:c,model:String(e.vapi.transcriber.model||"nova-2").toLowerCase(),language:String(e.vapi.transcriber.language||"en").toLowerCase()};let d={name:String(s),model:i,voice:o,transcriber:l,backgroundSound:"default"!==e.vapi.backgroundSound&&e.vapi.backgroundSound?e.vapi.backgroundSound:"off",firstMessage:String(r)};if(e.vapi.knowledgeBase){let t=e.vapi.knowledgeBase.replace(/{{COMPANY_NAME}}/g,s).replace(/{{Company name}}/gi,s);d.model.messages[0].content+=`

# KNOWLEDGE BASE / FAQs
${t}`}console.log("[VAPI] Final Payload Check:",JSON.stringify(d)),d.transcriber&&delete d.transcriber.punctuation;try{let e=await sk.post("https://api.vapi.ai/assistant",d,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return console.log("VAPI Assistant Created Successfully"),e.data}catch(e){throw console.error("VAPI API Error Details:",e.response?.data),Error(`VAPI Creation Failed: ${e.response?.data?.message||e.message}`)}},sM={get url(){return`file://${e.P("src/services/researchService.ts")}`}},sL=async e=>{let t=void 0!==ec.default&&ec.default.env&&1?"752af1c25737f27fb2715563a5534b7bec87c572":sM.env&&sM.env.VITE_SERPER_API_KEY||null;if(!t)return console.warn("VITE_SERPER_API_KEY missing in .env. Falling back to AI only."),{searchQuery:e,webResults:[]};try{console.log(`Researching: ${e}...`);let s=(await sk.post("https://google.serper.dev/search",{q:e,gl:"us",hl:"en",autocorrect:!0},{headers:{"X-API-KEY":t,"Content-Type":"application/json"}})).data;return{searchQuery:e,webResults:s.organic||[],placesResults:s.knowledgeGraph?[s.knowledgeGraph]:[]}}catch(t){return console.error("Research Phase Failed:",t),{searchQuery:e,webResults:[]}}},sU=[{id:"dental_clinic",name:"Dental Clinic",industry:"Dental",systemPrompt:`You are a professional Dental Receptionist at {{COMPANY_NAME}}. 
Your goal is to assist patients with booking appointments, answering questions about services, and collecting insurance information.
- Always maintain a professional, calm, and reassuring tone.
- Be extremely mindful of patient privacy (HIPAA).
- If a patient mentions an emergency (extreme pain, bleeding), prioritize finding the soonest possible slot today.
- Confirm if they are a new or returning patient.`,firstMessage:"Hello {{USER_NAME}}, thank you for calling {{COMPANY_NAME}}. How can I help you with your dental care today?",mandatoryFields:["Name","Phone","Service Type","New or Returning Patient"],optionalFields:["Email","Insurance Provider"],suggestedServices:["Routine Cleaning","Emergency Exam","Teeth Whitening","Consultation"],defaultTone:"Professional and Reassuring"},{id:"real_estate",name:"Real Estate Agency",industry:"Real Estate",systemPrompt:`You are a high-energy, helpful Real Estate Assistant for {{COMPANY_NAME}}.
Your primary goal is to qualify leads and book property viewings or listing consultations.
- Be proactive and enthusiastic.
- Ask if they are looking to buy, sell, or rent.
- Collect details about their budget and preferred neighborhoods.
- For sellers, offer a free "Home Valuation" consultation.`,firstMessage:"Hi {{USER_NAME}}! Thanks for reaching out to {{COMPANY_NAME}}. Are you looking for your dream home or interested in selling a property?",mandatoryFields:["Name","Phone","Interest (Buy/Sell/Rent)"],optionalFields:["Email","Budget Range","Location Preference"],suggestedServices:["Property Viewing","Listing Consultation","Home Valuation","Market Analysis"],defaultTone:"Enthusiastic and Proactive"},{id:"hvac_home_services",name:"HVAC & Home Services",industry:"Home Services",systemPrompt:`You are a reliable Dispatch Assistant for {{COMPANY_NAME}}, a premium home services provider.
Your goal is to understand the customer's service needs and schedule a technician.
- Maintain a helpful and efficient tone.
- For emergency HVAC issues (no heat in winter, no AC in summer), treat as high priority.
- Ask for the primary issue: Repair, Maintenance, or Installation.
- Verify the service address for the dispatch.`,firstMessage:"Hello {{USER_NAME}}, thanks for calling {{COMPANY_NAME}}. Is this an emergency service call or would you like to schedule a routine repair?",mandatoryFields:["Name","Phone","Service Address","Issue Description"],optionalFields:["Email","Preferred Time Window"],suggestedServices:["HVAC Repair","Seasonal Maintenance","System Installation","Emergency Call-out"],defaultTone:"Reliable and Professional"},{id:"law_firm",name:"Law Firm",industry:"Legal",systemPrompt:`You are a discreet and professional Legal Intake Specialist at {{COMPANY_NAME}}.
Your goal is to collect initial details for a potential new case and book an initial consultation.
- Tone: Formal, serious, and empathetic.
- CRITICAL: Do not provide legal advice. Remind callers that you are an AI assistant and a consultation with an attorney is required.
- Perform a basic conflict-of-interest check by asking for the names of any other parties involved.`,firstMessage:"Good day {{USER_NAME}}. Thank you for contacting {{COMPANY_NAME}}. To better assist you, could you please provide a brief overview of your legal inquiry?",mandatoryFields:["Name","Phone","Type of Case"],optionalFields:["Email","Opposing Party Names","Urgency"],suggestedServices:["Initial Consultation","Case Review","Document Signing Appointment"],defaultTone:"Formal and Empathetic"},{id:"beauty_salon",name:"Beauty & Hair Salon",industry:"Beauty",systemPrompt:`You are a stylish and helpful Front Desk Coordinator at {{COMPANY_NAME}}.
Your goal is to book appointments for hair, nails, and other beauty services.
- Tone: Friendly, upbeat, and trendy.
- Ask if they have a preferred stylist or technician.
- Mention any current seasonal promotions or special packages.
- Confirm the specific service requested (e.g., Color vs. Cut).`,firstMessage:"Hi {{USER_NAME}}! Welcome to {{COMPANY_NAME}}. Looking to refresh your look today?",mandatoryFields:["Name","Phone","Service Desired"],optionalFields:["Email","Preferred Stylist","Appointment Notes"],suggestedServices:["Haircut & Style","Full Color","Manicure/Pedicure","Bridal Updo"],defaultTone:"Friendly and Trendy"},{id:"veterinary",name:"Pet Care & Veterinary",industry:"Veterinary",systemPrompt:`You are a compassionate veterinary assistant at {{COMPANY_NAME}}.
Your goal is to help pet owners schedule appointments and answer basic questions about pet care.
- Tone: Empathetic, warm, and professional.
- Ask for the pet's name and species (dog, cat, etc.).
- If it's an emergency (injury, poisoning, difficulty breathing), instruct them to come in immediately or call the emergency line.
- Confirm if it's a routine check-up, vaccination, or a specific health concern.`,firstMessage:"Hello {{USER_NAME}}! This is {{COMPANY_NAME}}. How can we help your furry friend today?",mandatoryFields:["Name","Phone","Pet Name","Reason for Visit"],optionalFields:["Email","Species/Breed"],suggestedServices:["Annual Wellness Exam","Vaccination","Sick Pet Consult","Dental Cleaning"],defaultTone:"Empathetic and Professional"}],sD=e=>sU.find(t=>t.name===e),sF=["Dental Clinic","Real Estate Agency","HVAC & Home Services","Law Firm","Beauty & Hair Salon","Pet Care & Veterinary","Generic Support"],sB={appName:"Voice AI Admin",logoUrl:"",primaryColor:"#0f172a"},sG={metadata:{businessName:"",industry:"",primaryUseCase:"",targetUsers:"",description:"",createdAt:new Date().toISOString()},services:[],locations:[],resources:[],dataFields:{mandatory:["Name","Phone"],optional:["Email"],validationRules:"Phone must be E.164 format"},conversation:{tone:"Helpful and polite",formality:"Professional",speakingStyle:"Clear and concise",speechPace:"Normal",smallTalkAllowed:!0,identityDisclosure:"Always"},safety:{allowedTopics:"Services, Booking, Business Info",disallowedTopics:"Competitors, Personal Advice, Politics",complianceConstraints:"None"},integrations:{firebase:!0,googleCalendar:!1},operationMode:"Training",vapi:{systemPrompt:`AI Assistant is a sophisticated AI training assistant, crafted by experts in customer support and AI development at {{COMPANY_NAME}} within the {{DEPARTMENT_NAME}} team. Designed with the persona of a seasoned customer support professional, AI Assistant combines deep technical knowledge with a strong sense of emotional intelligence. AI Assistant’s primary role is to serve as a dynamic training platform for customer support agents, simulating a broad range of service scenarios, from basic inquiries to complex problem-solving challenges.

AI Assistant’s advanced capabilities allow it to replicate diverse customer service situations, making it an invaluable tool for training purposes. It guides new agents through simulated interactions, offering real-time feedback and guidance to refine skills in handling customer needs with patience, empathy, and professionalism. AI Assistant ensures every trainee learns to listen actively, respond thoughtfully, and uphold the highest standards of customer care.

Primary Mode of Interaction

AI Assistant interacts primarily through voice, accurately interpreting spoken queries and responding naturally through audio. This design prepares trainees for real customer conversations and live call environments. AI Assistant is engineered to recognize and adapt to emotional cues in speech, allowing trainees to practice managing emotional nuances with confidence and care.

Training Guidance

AI Assistant encourages trainees to practice active listening by acknowledging customer queries with clear confirmation of engagement, such as expressing presence and readiness to help.

AI Assistant emphasizes clear and empathetic communication, always tailored to the specific context of each interaction.

AI Assistant demonstrates how to handle unclear or complex customer concerns by asking thoughtful, open-ended clarifying questions in a natural and human manner.

AI Assistant teaches trainees to express empathy and understanding, particularly when customers are frustrated or dissatisfied, ensuring concerns are addressed with care and a strong focus on resolution.

AI Assistant prepares agents to transition interactions smoothly to human colleagues when appropriate, reinforcing the importance of human connection in sensitive or complex situations.

AI Assistant’s overarching mission is to strengthen the human side of customer support through immersive, scenario-based training. It is not merely an answer engine, but a refined training platform designed to develop knowledgeable, empathetic, and adaptable customer support professionals.

Additional Instruction

AI Assistant must not use numeric characters in any response.`,provider:"OpenAI",model:"gpt-4o-mini",firstMessage:"Hi there, this is AI Agent from {{Company name}}. How can I help you today?",temperature:.3,voiceProvider:"vapi",voiceId:"Mia",transcriber:{provider:"deepgram",language:"en",model:"nova-2"},backgroundSound:"default",knowledgeBase:`# FAQs for {{Company Name}}

## 1. What services do you offer?
We offer a range of services tailored to your needs. Please ask our AI assistant or check our services page for specific offerings.

## 2. How can I book an appointment?
You can book an appointment directly through our website, by calling us, or by speaking with our AI assistant immediately.

## 3. What are your operating hours?
We are open from Monday to Friday, 9:00 AM to 5:00 PM. Weekend availability varies by location.

## 4. Do you offer virtual consultations?
Yes, we offer virtual consultations for select services. Please check our booking page for availability.

## 5. What is your cancellation policy?
We require at least 24 hours' notice for cancellations. Late cancellations may incur a fee.

## 6. Where are you located?
Our primary location is [Address]. We also serve clients remotely depending on the service.

## 7. Do you accept insurance?
We stand by our transparent pricing. Please contact our billing department to discuss insurance compatibility.

## 8. How can I contact support?
You can reach our support team via email at support@[company].com or by calling our main line.

## 9. Is there a parking area?
Yes, generic parking is available on-site for all our visitors.

## 10. What payment methods do you accept?
We accept all major credit cards, debit cards, and digital payment methods like Apple Pay and Google Pay.`,clientUrl:"https://voice-agent-eight-delta.vercel.app",userName:"",userEmail:"",userPhone:""}},s$=F("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),sH=F("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),sq=F("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),sY=F("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),sV=F("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),sK=F("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),sz=F("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),sW=F("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),sJ=F("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.i(51718);var sX=e.i(18357);function sQ(){let[t,s]=(0,P.useState)(null),[a,n]=(0,P.useState)(!0),[r,i]=(0,P.useState)(!1),[o,l]=(0,P.useState)(!1),[c,d]=(0,P.useState)("metadata"),[u,p]=(0,P.useState)(sG),[h,m]=(0,P.useState)(""),[f,g]=(0,P.useState)(!1),[y,b]=(0,P.useState)(!1),[x,v]=(0,P.useState)(!1),[w,N]=(0,P.useState)(!1),[E,A]=(0,P.useState)(!1),[C,S]=(0,P.useState)(!1),[j,R]=(0,P.useState)([]),[O,T]=(0,P.useState)(null),[I,k]=(0,P.useState)(sB),[M,L]=(0,P.useState)(!1),[U,D]=(0,P.useState)("BASIC"),[F,B]=(0,P.useState)(!1),[$,H]=(0,P.useState)(!1),[q,Y]=(0,P.useState)(null);(0,P.useRef)(null),(0,P.useEffect)(()=>{t&&V()},[t]),(0,P.useEffect)(()=>{document.documentElement.style.setProperty("--brand-primary",I.primaryColor)},[I.primaryColor]);let V=async()=>{L(!0);try{let{getOrgData:t}=await e.A(35379),s=await t();s&&(s.branding&&k(s.branding),s.plan&&D(s.plan))}catch(e){console.error("Failed to load org data",e)}finally{L(!1)}},K=async()=>{L(!0);try{await (0,eK.saveBranding)(I),alert("Branding settings saved for your organization!")}catch(e){alert("Error saving branding: "+e.message)}finally{L(!1)}};(0,P.useEffect)(()=>{let e=(0,sX.onAuthStateChanged)(eK.auth,e=>{s(e),n(!1),i(!1),e?(l(!1),J(),p(e=>({...e,integrations:{firebase:!0,...e.integrations||{},googleCalendar:!0}}))):R([])});return()=>e()},[]);let z=async()=>{i(!0);try{await (0,eK.loginWithGoogle)()}catch(e){throw console.error("Login Error",e),i(!1),e}},W=async()=>{if(o){l(!1),p(sG),b(!1);return}try{await (0,eK.logoutUser)(),b(!1),p(sG)}catch(e){console.error("Logout Error",e)}},J=async()=>{try{let{getAgents:t}=await e.A(35379),s=await t();R(s)}catch(e){console.error("Failed to load agents",e)}},Q=async t=>{try{let{getAgentConfig:s}=await e.A(35379),a=await s(t);a&&(p(a),T(t),b(!0))}catch(e){console.error("Failed to select agent",e)}},Z=u.metadata.businessName.length>0&&u.services.length>0&&u.locations.length>0&&!!u.vapi.userName&&!!u.vapi.userEmail&&!!u.vapi.userPhone,ee=async()=>{let e=t?(0,eK.getOrgId)(t):"anonymous_org",s=u.metadata.businessName.trim().toLowerCase().replace(/[^a-z0-9]+/g,"_"),a=O||`agent_${s}`,n=u.vapi.clientUrl||"https://voice-agent-eight-delta.vercel.app";if(o){let t=`&uName=${encodeURIComponent(u.vapi.userName||"")}&uEmail=${encodeURIComponent(u.vapi.userEmail||"")}&uPhone=${encodeURIComponent(u.vapi.userPhone||"")}`,s=`${n}?orgId=${e}&agentId=${a}&role=admin&demo=true${t}`;window.open(s,"_blank");return}if(!t)return void alert("Please sign in first or use Demo Mode.");A(!0);try{Z&&(await (0,eK.saveConfiguration)(u),b(!0));let s=await t.getIdToken(!0),r=`&uName=${encodeURIComponent(u.vapi.userName||"")}&uEmail=${encodeURIComponent(u.vapi.userEmail||"")}&uPhone=${encodeURIComponent(u.vapi.userPhone||"")}`,i=`${n}?authtoken=${encodeURIComponent(s)}&orgId=${e}&agentId=${a}&role=admin${r}`;window.open(i,"_blank")}catch(e){console.error("Failed to launch client",e),alert("Error launching client. Check console for details.")}finally{A(!1)}},es=async(e=!1)=>{if(h.trim()){T(null),g(!0),e&&N(!0);try{let t=null;if(e)try{t=await sL(h)}catch(e){console.error("Research failed, proceeding with AI only",e)}finally{N(!1)}let s=sD(u.metadata.industry),a=await eV(h,t,s);p(e=>({...e,metadata:{...e.metadata,...a.metadata},services:a.services||e.services,locations:a.locations||e.locations,resources:a.resources||e.resources,conversation:{...e.conversation,...a.conversation},safety:{...e.safety,...a.safety},integrations:{...e.integrations,...a.integrations},vapi:{...e.vapi,...a.vapi||{}}}))}catch(e){console.error("AI Generation failed",e),alert("AI Assistant Error: "+(e.message||"Unknown error"))}finally{g(!1)}}},ea=async()=>{if(!u.vapi.userPhone||!q)return void alert("Assistant ID and User Phone Number are required.");H(!0);try{let e=await fetch("/api/vapi/call",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:u.vapi.userPhone,assistantId:q})}),t=await e.json();if(t.error)throw Error(t.error);alert("Calling your phone now...")}catch(e){console.error("Call failed",e),alert("Call failed: "+e.message)}finally{H(!1)}},en=async()=>{if(t){B(!0);try{let e=(0,eK.getOrgId)(t),s=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orgId:e,priceId:"price_1Qv3W..._test",successUrl:window.location.origin+"?session_id={CHECKOUT_SESSION_ID}",cancelUrl:window.location.origin})}),{url:a,error:n}=await s.json();if(n)throw Error(n);window.location.href=a}catch(e){console.error("Upgrade failed",e),alert("Upgrade failed: "+e.message)}finally{B(!1)}}},er=async()=>{v(!0);try{let e=await (0,eK.saveConfiguration)(u);if(T(e),await J(),!o&&u.vapi.provider)try{let e=await sP(u);e&&e.id&&Y(e.id),ee()}catch(e){console.error("VAPI Error",e),alert(`Saved to Cloud, but VAPI creation failed: ${e.message}`)}b(!0)}catch(e){console.error("Failed to save config",e),o?(alert("Demo Mode: Configuration validated locally."),b(!0)):alert("Failed to save configuration to database.")}finally{v(!1)}},ei=(e,t)=>{p(s=>({...s,metadata:{...s.metadata,[e]:t}}))},eo=(e,t,s)=>{p(a=>({...a,services:a.services.map(a=>a.id===e?{...a,[t]:s}:a)}))},ec=(e,t,s)=>{p(a=>({...a,locations:a.locations.map(a=>a.id===e?{...a,[t]:s}:a)}))};return a?(0,_.jsx)("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,_.jsx)(X,{className:"w-8 h-8 text-brand-500 animate-spin"})}):t||o?y?(0,_.jsx)("div",{className:"min-h-screen bg-slate-900 text-slate-200 flex flex-col items-center justify-center p-8 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-900 to-slate-900",children:(0,_.jsxs)("div",{className:"max-w-2xl w-full text-center space-y-8 animate-in fade-in zoom-in duration-700",children:[(0,_.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,_.jsx)("div",{className:"w-20 h-20 bg-emerald-500/20 border border-emerald-500/50 rounded-full flex items-center justify-center mb-4",children:(0,_.jsx)(sY,{className:"w-10 h-10 text-emerald-400"})}),(0,_.jsx)("h1",{className:"text-4xl font-extrabold text-white tracking-tight",children:"Configuration Submitted!"}),(0,_.jsx)("p",{className:"text-slate-400 text-lg max-w-md",children:"Your Voice AI Agent has been updated and the VAPI assistant is ready for action."})]}),(0,_.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-4 pt-4",children:[u.vapi.userPhone&&q&&(0,_.jsxs)("button",{onClick:ea,disabled:$,className:"px-8 py-3 bg-brand-500 hover:bg-brand-600 text-white font-bold rounded-xl flex items-center gap-3 shadow-lg shadow-brand-500/25 transition-all hover:scale-105 active:scale-95 disabled:opacity-70",children:[$?(0,_.jsx)(X,{className:"w-5 h-5 animate-spin"}):(0,_.jsx)(sW,{className:"w-5 h-5"}),"Call Me Now"]}),(0,_.jsxs)("button",{onClick:ee,disabled:E,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-50 text-white font-bold rounded-xl flex items-center gap-3 shadow-lg shadow-indigo-500/25 transition-all hover:scale-105 active:scale-95 disabled:opacity-70",children:[(0,_.jsx)(sV,{className:"w-5 h-5 font-bold"}),"Launch Agent Interface"]}),(0,_.jsx)("button",{onClick:()=>b(!1),className:"px-8 py-3 bg-slate-800 hover:bg-slate-700 text-white font-bold rounded-xl border border-slate-700 transition-all hover:bg-slate-700/80",children:"Back to Configurator"})]})]})}):(0,_.jsxs)("div",{className:"flex min-h-screen bg-slate-50",children:[(0,_.jsx)(et,{activeSection:c,onNavigate:e=>{d(e);let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},onLock:er,onLaunchClient:ee,isValid:Z,isSaving:x,isLocked:y,isLaunching:E,agents:j,onSelectAgent:Q,branding:I,currentAgentId:O||void 0}),(0,_.jsxs)("main",{className:"ml-64 flex-1 p-8 max-w-5xl mx-auto space-y-16 pb-32",children:[(0,_.jsxs)("div",{className:"flex justify-end mb-4 items-center gap-4",children:[o&&(0,_.jsx)("span",{className:"px-3 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded-full border border-amber-200",children:"DEMO MODE"}),(0,_.jsx)("button",{onClick:W,className:"text-sm text-slate-500 hover:text-red-500 px-3 py-1",children:o?"Exit Demo":`Sign Out (${t?.email})`})]}),(0,_.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 rounded-xl p-6 text-white shadow-lg mb-8",children:(0,_.jsxs)("div",{className:"flex items-start gap-4",children:[(0,_.jsx)("div",{className:"p-3 bg-white/10 rounded-lg",children:(0,_.jsx)(s$,{className:"w-6 h-6 text-indigo-100"})}),(0,_.jsxs)("div",{className:"flex-1",children:[(0,_.jsx)("h2",{className:"text-lg font-bold mb-2",children:"AI Configuration Assistant"}),(0,_.jsx)("p",{className:"text-indigo-100 mb-4 text-sm",children:"Describe the business, and I will auto-fill the configuration for you."}),(0,_.jsxs)("div",{className:"flex gap-2",children:[(0,_.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"e.g. A dental clinic in Chicago offering exams and cleanings...",className:"flex-1 px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-indigo-200 focus:outline-none focus:ring-2 focus:ring-white/50",onKeyDown:e=>"Enter"===e.key&&es()}),(0,_.jsxs)("button",{onClick:()=>es(!1),disabled:f,className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2 border border-white/20",children:[f&&!w?(0,_.jsx)(X,{className:"w-4 h-4 animate-spin"}):(0,_.jsx)(s$,{className:"w-4 h-4"}),"Auto-Fill"]}),(0,_.jsxs)("button",{onClick:()=>es(!0),disabled:f,className:"px-6 py-2 bg-white text-indigo-700 font-bold rounded-lg hover:bg-indigo-50 transition-colors disabled:opacity-50 flex items-center gap-2 shadow-xl shadow-black/10",children:[w?(0,_.jsx)(X,{className:"w-4 h-4 animate-spin"}):(0,_.jsx)(sK,{className:"w-4 h-4"}),"Research & Auto-Fill"]})]})]})]})}),(0,_.jsxs)("section",{id:"metadata",className:"space-y-6 scroll-mt-24",children:[(0,_.jsxs)("div",{className:"border-b border-slate-200 pb-4",children:[(0,_.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Section A: Business Metadata"}),(0,_.jsx)("p",{className:"text-slate-500",children:"Core identity and purpose of the business."})]}),(0,_.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Business Name"}),(0,_.jsx)("input",{type:"text",className:"w-full p-2 border rounded-md",value:u.metadata.businessName,onChange:e=>ei("businessName",e.target.value)})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Created At"}),(0,_.jsxs)("div",{className:"flex items-center gap-2 w-full p-2 border rounded-md bg-slate-100 text-slate-500",children:[(0,_.jsx)(G,{className:"w-4 h-4"}),(0,_.jsx)("span",{children:u.metadata.createdAt?new Date(u.metadata.createdAt).toLocaleString():"New"})]})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Industry"}),(0,_.jsx)("input",{type:"text",className:"w-full p-2 border rounded-md",list:"industries",value:u.metadata.industry,onChange:e=>ei("industry",e.target.value),placeholder:"Search or select industry..."}),(0,_.jsx)("datalist",{id:"industries",children:sF.map(e=>(0,_.jsx)("option",{value:e},e))}),(0,_.jsxs)("button",{type:"button",onClick:()=>{let e=sD(u.metadata.industry);e&&(p(t=>({...t,vapi:{...t.vapi,systemPrompt:e.systemPrompt,firstMessage:e.firstMessage},dataFields:{...t.dataFields,mandatory:e.mandatoryFields,optional:e.optionalFields},conversation:{...t.conversation,tone:e.defaultTone}})),alert(`Applied ${e.name} template!`))},className:"mt-2 text-xs text-indigo-600 font-semibold flex items-center gap-1 hover:text-indigo-700",children:[(0,_.jsx)(sV,{className:"w-3 h-3"}),"Apply Expert Template"]})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Primary Use Case"}),(0,_.jsx)("input",{type:"text",className:"w-full p-2 border rounded-md",value:u.metadata.primaryUseCase,onChange:e=>ei("primaryUseCase",e.target.value)})]})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Business Description"}),(0,_.jsx)("textarea",{className:"w-full p-2 border rounded-md h-24",value:u.metadata.description,onChange:e=>ei("description",e.target.value)})]}),(0,_.jsxs)("div",{className:"mt-8 bg-slate-50 border border-slate-200 rounded-xl p-6",children:[(0,_.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,_.jsx)(sz,{className:"w-5 h-5 text-indigo-600"}),(0,_.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"Organization Branding"})]}),(0,_.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"App Name / Identity"}),(0,_.jsx)("input",{type:"text",className:"w-full p-2 border rounded-md",value:I.appName,onChange:e=>k(t=>({...t,appName:e.target.value}))})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Logo URL"}),(0,_.jsx)("input",{type:"text",className:"w-full p-2 border rounded-md",value:I.logoUrl,onChange:e=>k(t=>({...t,logoUrl:e.target.value}))})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Primary Brand Color"}),(0,_.jsx)("input",{type:"color",className:"w-full h-10 p-1 rounded-md border",value:I.primaryColor,onChange:e=>k(t=>({...t,primaryColor:e.target.value}))})]}),(0,_.jsx)("div",{className:"flex items-end",children:(0,_.jsxs)("button",{onClick:K,disabled:M,className:"w-full py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[M?(0,_.jsx)(X,{className:"w-4 h-4 animate-spin"}):(0,_.jsx)(sY,{className:"w-4 h-4"}),"Save Branding"]})})]})]})]}),(0,_.jsxs)("section",{id:"services",className:"space-y-6 scroll-mt-24",children:[(0,_.jsxs)("div",{className:"flex justify-between items-end border-b border-slate-200 pb-4",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Section B: Services"}),(0,_.jsx)("p",{className:"text-slate-500",children:"Define your offerings."})]}),(0,_.jsxs)("button",{onClick:()=>{p(e=>({...e,services:[...e.services,{id:Math.random().toString(36).substring(2,9),name:"",description:"",durationMinutes:30,bookingRules:""}]}))},className:"text-sm bg-slate-900 text-white px-3 py-2 rounded-md flex items-center gap-2",children:[(0,_.jsx)(sH,{className:"w-4 h-4"})," Add Service"]})]}),(0,_.jsx)("div",{className:"space-y-4",children:u.services.map(e=>(0,_.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-slate-200 shadow-sm relative group",children:[(0,_.jsx)("button",{onClick:()=>{var t;return t=e.id,void p(e=>({...e,services:e.services.filter(e=>e.id!==t)}))},className:"absolute top-4 right-4 text-slate-400 hover:text-red-500",children:(0,_.jsx)(sq,{className:"w-4 h-4"})}),(0,_.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,_.jsxs)("div",{className:"col-span-8 space-y-2",children:[(0,_.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Service Name"}),(0,_.jsx)("input",{type:"text",className:"w-full p-2 border rounded",value:e.name,onChange:t=>eo(e.id,"name",t.target.value)})]}),(0,_.jsxs)("div",{className:"col-span-4 space-y-2",children:[(0,_.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Duration (min)"}),(0,_.jsx)("input",{type:"number",className:"w-full p-2 border rounded",value:e.durationMinutes,onChange:t=>eo(e.id,"durationMinutes",parseInt(t.target.value))})]})]})]},e.id))})]}),(0,_.jsxs)("section",{id:"locations",className:"space-y-6 scroll-mt-24",children:[(0,_.jsxs)("div",{className:"flex justify-between items-end border-b border-slate-200 pb-4",children:[(0,_.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Section C: Locations"}),(0,_.jsxs)("button",{onClick:()=>{p(e=>({...e,locations:[...e.locations,{id:Math.random().toString(36).substring(2,9),name:"",mode:"Physical",operatingDays:["Monday","Tuesday","Wednesday","Thursday","Friday"],operatingHours:"09:00 - 17:00",timeZone:"UTC"}]}))},className:"text-sm bg-slate-900 text-white px-3 py-2 rounded-md flex items-center gap-2",children:[(0,_.jsx)(sH,{className:"w-4 h-4"})," Add Location"]})]}),(0,_.jsx)("div",{className:"space-y-4",children:u.locations.map(e=>(0,_.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-slate-200 shadow-sm relative",children:[(0,_.jsx)("button",{onClick:()=>{var t;return t=e.id,void p(e=>({...e,locations:e.locations.filter(e=>e.id!==t)}))},className:"absolute top-4 right-4 text-slate-400 hover:text-red-500",children:(0,_.jsx)(sq,{className:"w-4 h-4"})}),(0,_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Location Name"}),(0,_.jsx)("input",{type:"text",className:"w-full p-2 border rounded",value:e.name,onChange:t=>ec(e.id,"name",t.target.value)})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Type"}),(0,_.jsxs)("select",{className:"w-full p-2 border rounded text-sm",value:e.mode,onChange:t=>ec(e.id,"mode",t.target.value),children:[(0,_.jsx)("option",{value:"Physical",children:"Physical"}),(0,_.jsx)("option",{value:"Virtual",children:"Virtual"}),(0,_.jsx)("option",{value:"Hybrid",children:"Hybrid"})]})]})]})]},e.id))})]}),(0,_.jsxs)("section",{id:"vapi",className:"space-y-6 scroll-mt-24 pb-20",children:[(0,_.jsx)("div",{className:"border-b border-slate-200 pb-4",children:(0,_.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Section J: VAPI Configuration"})}),(0,_.jsxs)("div",{className:"bg-white p-6 border rounded-lg shadow-sm space-y-6",children:[(0,_.jsxs)("div",{className:"p-4 bg-slate-50 border rounded-lg grid grid-cols-3 gap-4",children:[(0,_.jsxs)("div",{className:"space-y-1",children:[(0,_.jsx)("label",{className:"text-xs font-bold text-slate-600",children:"User Name"}),(0,_.jsx)("input",{className:"w-full p-2 text-sm border rounded",value:u.vapi.userName||"",onChange:e=>p(t=>({...t,vapi:{...t.vapi,userName:e.target.value}}))})]}),(0,_.jsxs)("div",{className:"space-y-1",children:[(0,_.jsx)("label",{className:"text-xs font-bold text-slate-600",children:"User Email"}),(0,_.jsx)("input",{className:"w-full p-2 text-sm border rounded",value:u.vapi.userEmail||"",onChange:e=>p(t=>({...t,vapi:{...t.vapi,userEmail:e.target.value}}))})]}),(0,_.jsxs)("div",{className:"space-y-1 col-span-2",children:[(0,_.jsx)("label",{className:"text-xs font-bold text-slate-600",children:"User Phone"}),(0,_.jsxs)("div",{className:"flex gap-2",children:[(0,_.jsx)("input",{className:"w-full p-2 text-sm border rounded",value:u.vapi.userPhone||"",onChange:e=>p(t=>({...t,vapi:{...t.vapi,userPhone:e.target.value}}))}),q&&(0,_.jsxs)("button",{onClick:ea,disabled:$,className:"px-3 py-1 bg-brand-500 text-white rounded text-sm hover:bg-brand-600 disabled:opacity-50 transition-colors flex items-center gap-2 whitespace-nowrap",children:[$?(0,_.jsx)(X,{className:"w-3 h-3 animate-spin"}):(0,_.jsx)(sJ,{className:"w-3 h-3"}),"Test Call"]})]})]})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-sm font-medium",children:"System Prompt"}),(0,_.jsx)("textarea",{className:"w-full p-2 border rounded h-64 font-mono text-sm",value:u.vapi.systemPrompt,onChange:e=>p(t=>({...t,vapi:{...t.vapi,systemPrompt:e.target.value}}))})]}),(0,_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-xs font-bold uppercase text-slate-500",children:"First Message"}),(0,_.jsx)("textarea",{className:"w-full p-2 border rounded text-sm h-20",value:u.vapi.firstMessage,onChange:e=>p(t=>({...t,vapi:{...t.vapi,firstMessage:e.target.value}}))})]}),(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsx)("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Knowledge Base"}),(0,_.jsx)("textarea",{className:"w-full p-2 border rounded text-xs font-mono h-20",value:u.vapi.knowledgeBase,onChange:e=>p(t=>({...t,vapi:{...t.vapi,knowledgeBase:e.target.value}}))})]})]})]})]}),(0,_.jsxs)("section",{id:"billing",className:"space-y-6 scroll-mt-24 pb-20",children:[(0,_.jsxs)("div",{className:"border-b border-slate-200 pb-4",children:[(0,_.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Section K: Plan & Billing"}),(0,_.jsx)("p",{className:"text-slate-500",children:"Manage your organization's subscription and usage."})]}),(0,_.jsxs)("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm flex items-center justify-between",children:[(0,_.jsxs)("div",{className:"space-y-2",children:[(0,_.jsxs)("div",{className:"flex items-center gap-3",children:[(0,_.jsxs)("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${"PRO"===U?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[U," PLAN"]}),"BASIC"===U&&(0,_.jsx)("span",{className:"text-sm text-slate-400",children:"Limited to 1 Agent"})]}),(0,_.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"PRO"===U?"Professional Organization":"Starter Account"}),(0,_.jsx)("p",{className:"text-sm text-slate-500 max-w-sm",children:"PRO"===U?"You have unlimited agents, custom branding, and professional support.":"Upgrade to Professional for unlimited agents, advanced analytics, and custom branding persistence."})]}),"BASIC"===U&&(0,_.jsxs)("button",{onClick:en,disabled:F,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 flex items-center gap-2 transition-all active:scale-95 disabled:opacity-70",children:[F?(0,_.jsx)(X,{className:"w-5 h-5 animate-spin"}):(0,_.jsx)(sV,{className:"w-5 h-5"}),"Upgrade to Pro"]}),"PRO"===U&&(0,_.jsxs)("div",{className:"flex items-center gap-2 text-emerald-600 font-bold",children:[(0,_.jsx)(sY,{className:"w-6 h-6"}),"Active"]})]})]})]})]}):(0,_.jsx)(el,{onLogin:z,onDemoLogin:()=>{l(!0)},isLoggingIn:r})}e.s(["default",()=>sQ],52683)}]);